{"componentChunkName":"component---src-templates-page-js","path":"/blog/k-smith-numbers","webpackCompilationHash":"15829038b9f39858b144","result":{"data":{"markdownRemark":{"frontmatter":{"title":"连续Smith数","date":"Sat, 30th November 2019","tags":["素数","数字和"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB0wASAB//xAAWEAADAAAAAAAAAAAAAAAAAAAQIEH/2gAIAQEAAQUCaj//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAcEAACAgIDAAAAAAAAAAAAAAAAAREhMUFRcYH/2gAIAQEAAT8h27L8OxDwKODYTobg/9oADAMBAAIAAwAAABAwyD3/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMUFhUXGB/9oACAEBAAE/EMgK83e5YytUqoJyt7YhXYXW6gwr1TmoEaPyLdnGoiM8xlRg6n//2Q==","width":150,"height":150,"src":"/static/790c47c2acbbd796016b38a56fc26beb/44086/primes.jpg","srcSet":"/static/790c47c2acbbd796016b38a56fc26beb/44086/primes.jpg 1x,\n/static/790c47c2acbbd796016b38a56fc26beb/1caf6/primes.jpg 1.5x,\n/static/790c47c2acbbd796016b38a56fc26beb/792e8/primes.jpg 2x"}}}},"html":"<p>medie2005<a href=\"https://bbs.emath.ac.cn/thread-926-1-1.html\">于2008年11月21日提问</a> ，<br>\nSmith number 是自身数字和等于其所有素因子（包含重复）的数字和的合数。<br>\n比如：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>666</mn><mo>=</mo><mn>2</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>37</mn></mrow><annotation encoding=\"application/x-tex\">666=2\\times 3\\times 3\\times 37</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">7</span></span></span></span>.<br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>666</mn></mrow><annotation encoding=\"application/x-tex\">666</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mord\">6</span></span></span></span>的数字和为：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>6</mn><mo>+</mo><mn>6</mn><mo>+</mo><mn>6</mn><mo>=</mo><mn>18</mn></mrow><annotation encoding=\"application/x-tex\">6+6+6=18</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">8</span></span></span></span>；而<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>666</mn></mrow><annotation encoding=\"application/x-tex\">666</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mord\">6</span></span></span></span>的所有素因子（包含重复）的数字和为：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mn>3</mn><mo>+</mo><mn>3</mn><mo>+</mo><mn>7</mn><mo>=</mo><mn>18</mn></mrow><annotation encoding=\"application/x-tex\">2+3+3+3+7=18</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">7</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">8</span></span></span></span>，于是，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>666</mn></mrow><annotation encoding=\"application/x-tex\">666</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mord\">6</span></span></span></span>是一个Smith number。  </p>\n<p>更奇特的，三个相邻合数73615 ，73616，73617都是Smith number（<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>73615</mn><mo>=</mo><mn>5</mn><mo>×</mo><mn>14723</mn></mrow><annotation encoding=\"application/x-tex\">73615=5\\times 14723</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">7</span><span class=\"mord\">3</span><span class=\"mord\">6</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">2</span><span class=\"mord\">3</span></span></span></span> ，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>73616</mn><mo>=</mo><msup><mn>2</mn><mn>4</mn></msup><mo>×</mo><mn>43</mn><mo>×</mo><mn>107</mn></mrow><annotation encoding=\"application/x-tex\">73616=2^4\\times 43\\times 107</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">7</span><span class=\"mord\">3</span><span class=\"mord\">6</span><span class=\"mord\">1</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">4</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">7</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>73617</mn><mo>=</mo><mn>3</mn><mo>×</mo><mn>53</mn><mo>×</mo><mn>463</mn></mrow><annotation encoding=\"application/x-tex\">73617=3\\times 53\\times 463</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">7</span><span class=\"mord\">3</span><span class=\"mord\">6</span><span class=\"mord\">1</span><span class=\"mord\">7</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">5</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">6</span><span class=\"mord\">3</span></span></span></span>）。我们把K个相邻合数都是Smith number的数称为K-Smith numbers ，为了方便，就以第1个合数来表示这K个数。比如，73615 ，73616，73617，表示为3-Smith numbers : 73615。</p>\n<p>问题：\n1）：请求出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>内的所有3-Smith numbers。<br>\n2）：对<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">1\\le i\\le 10</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.79549em;vertical-align:-0.13597em;\"></span><span class=\"mord mathdefault\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span></span>中的每个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>，请求出i-Smith numbers各一个。  </p>\n<h1>详细内容</h1>\n<p>medie2005一开始把数据搜索范围设定在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>19</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{19}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">9</span></span></span></span></span></span></span></span></span></span></span></span>以内，不过后来应该是在大家的建议之下，把范围缩小到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>.  </p>\n<h2>初步分析</h2>\n<p>liangbch首先给出一种复杂度接近<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span>的穷举方法:<br>\n我的想法是穷举，但没想出什么好的剪枝算法。<br>\n算法思路：<br>\n 1. 采用筛法，批量分解质因数。应该比逐个分解质因数快不少。需要用到链表（可用内存池优化性能），也需要不少的内存。<br>\n 2. .对于每个合数，计算其各位数字之和，和各个素因数各个数字之和。  </p>\n<p>liangbch、无心人、mathe首先讨论给定一个数字，其素因子数目的估计值，mathe认为这个值应该近似为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mrow><mi>p</mi><mo>≤</mo><mi>n</mi></mrow></msub><mfrac><mn>1</mn><mi>p</mi></mfrac><mo>=</mo><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_{p\\le n}\\frac1p=O(\\log(\\log(n)))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.326216em;vertical-align:-0.481108em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.14546899999999996em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mrel mtight\">≤</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43581800000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">p</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span>。<br>\nliangbch认为：<br>\nn以内整数中，平均每个数的素因子的个数计算方法（重复的值计算一次），应该如mathe所言。</p>\n<p>更明确的描述应该是这样的。 如n以内素数的个数为m,将第i个素数记为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">P_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 则n以内的数总的素因子的个数为：<br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mi>n</mi><msub><mi>P</mi><mn>1</mn></msub></mfrac><mo>+</mo><mfrac><mi>n</mi><msub><mi>P</mi><mn>2</mn></msub></mfrac><mo>+</mo><mfrac><mi>n</mi><msub><mi>P</mi><mn>3</mn></msub></mfrac><mo>+</mo><mo>⋯</mo><mo>+</mo><mfrac><mi>n</mi><msub><mi>P</mi><mi>m</mi></msub></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{n}{P_1} + \\frac{n}{P_2}+\\frac{n}{P_3} +\\dots +\\frac{n}{P_m}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.140492em;vertical-align:-0.44509999999999994em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44509999999999994em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.140492em;vertical-align:-0.44509999999999994em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44509999999999994em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.140492em;vertical-align:-0.44509999999999994em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44509999999999994em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.140492em;vertical-align:-0.44509999999999994em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.695392em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44509999999999994em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>。<br>\n故平均每个数素因子的个数为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><msub><mi>P</mi><mn>1</mn></msub></mfrac><mo>+</mo><mfrac><mn>1</mn><msub><mi>P</mi><mn>2</mn></msub></mfrac><mo>+</mo><mo>⋯</mo><mo>+</mo><mfrac><mn>1</mn><msub><mi>P</mi><mi>m</mi></msub></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac1{P_1}+\\frac1{P_2}+\\dots +\\frac1{P_m}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2902079999999998em;vertical-align:-0.44509999999999994em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44509999999999994em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2902079999999998em;vertical-align:-0.44509999999999994em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44509999999999994em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2902079999999998em;vertical-align:-0.44509999999999994em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathdefault mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44509999999999994em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>。<br>\n我们知道，当n很大是，n以内的自然数的倒数有极限，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mfrac><mn>1</mn><mi>i</mi></mfrac><mo>=</mo><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>C</mi><mo separator=\"true\">,</mo><mi>c</mi><mo>=</mo><mn>0.5722</mn></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^{n}\\frac 1i=\\log(n)+C,c=0.5722</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">5</span><span class=\"mord\">7</span><span class=\"mord\">2</span><span class=\"mord\">2</span></span></span></span>，但不知道mathe如何推出n以内的素数的倒数和公式。<br>\n那么筛法求素数的复杂度 就是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">n\\log(\\log(n))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span>了?  </p>\n<p>mathe答复:<br>\n我们知道对于一个整数x,它为素数的概率大概为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mrow><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac1{\\log(x)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.365108em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>,所以我们可以将\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mrow><mi>p</mi><mo>≤</mo><mi>n</mi></mrow></msub><mfrac><mn>1</mn><mi>p</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\sum_{p\\le n}\\frac1p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.326216em;vertical-align:-0.481108em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.14546899999999996em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">p</span><span class=\"mrel mtight\">≤</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43581800000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">p</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>近似写成<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∫</mo><mi>a</mi><mi>n</mi></msubsup><mfrac><mn>1</mn><mrow><mi>x</mi><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mi>d</mi><mi>x</mi><mo>=</mo><msubsup><mo>∫</mo><mi>a</mi><mi>n</mi></msubsup><mfrac><mrow><mi>d</mi><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo>=</mo><msubsup><mo>∫</mo><mrow><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow></msubsup><mfrac><mrow><mi>d</mi><mi>t</mi></mrow><mi>t</mi></mfrac><mo>=</mo><mi>O</mi><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\int_a^n\\frac1{x\\log(x)}dx=\\int_a^n\\frac{d\\log(x)}{\\log(x)}=\\int_{\\log(a)}^{\\log(n)}\\frac{dt}t=O(\\log(\\log(n))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.379292em;vertical-align:-0.52em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8592920000000001em;\"><span style=\"top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">a</span></span></span><span style=\"top:-3.2579000000000002em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35582em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">x</span><span class=\"mspace mtight\" style=\"margin-right:0.19516666666666668em;\"></span><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">x</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.53em;vertical-align:-0.52em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8592920000000001em;\"><span style=\"top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">a</span></span></span><span style=\"top:-3.2579000000000002em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35582em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span><span class=\"mspace mtight\" style=\"margin-right:0.19516666666666668em;\"></span><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.61372em;vertical-align:-0.5308200000000001em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0829em;\"><span style=\"top:-2.3441799999999997em;margin-left:-0.19445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">a</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.2579000000000002em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5308200000000001em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">t</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">d</span><span class=\"mord mathdefault mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span>.  </p>\n<h2>求解</h2>\n<p>无心人在2008年11月25日给出如下的Huskell代码</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">  <span class=\"token function\">import</span> Factoring\n  <span class=\"token function\">import</span> Primes\n\n  readInt :: IO Integer\n  readInt <span class=\"token operator\">=</span> readLn\n  \n  digitsSum n <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">then</span> <span class=\"token number\">0</span> <span class=\"token keyword\">else</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span>n  \\`mod\\` <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> digitsSum <span class=\"token punctuation\">(</span>n \\`div\\` <span class=\"token number\">10</span><span class=\"token punctuation\">))</span></span>\n  addFactors <span class=\"token punctuation\">(</span>a, b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> toInteger <span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span> * <span class=\"token punctuation\">(</span>digitsSum a<span class=\"token punctuation\">)</span>\n  f <span class=\"token punctuation\">(</span>a, b, c<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>b <span class=\"token operator\">==</span> a+1<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>c <span class=\"token operator\">==</span> b+1<span class=\"token punctuation\">)</span>\n  \n  smithNumber n <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> n<span class=\"token string\">' | n'</span> <span class=\"token operator\">&lt;</span>- <span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">..</span>n<span class=\"token punctuation\">]</span>, not <span class=\"token punctuation\">(</span>isPrime n<span class=\"token string\">'), let nFactors = primePowerFactorsL n'</span>, <span class=\"token punctuation\">(</span>digitsSum n'<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token function\">sum</span> <span class=\"token punctuation\">(</span>map <span class=\"token punctuation\">(</span>addFactors<span class=\"token punctuation\">)</span> nFactors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n  filter3 <span class=\"token function\">ls</span> <span class=\"token operator\">=</span> filter f <span class=\"token punctuation\">(</span>zip3 <span class=\"token function\">ls</span> <span class=\"token punctuation\">(</span>tail <span class=\"token function\">ls</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>drop <span class=\"token number\">2</span> <span class=\"token function\">ls</span><span class=\"token punctuation\">))</span> \n  smithNumber3 n <span class=\"token operator\">=</span> filter3 <span class=\"token punctuation\">(</span>smithNumber n<span class=\"token punctuation\">)</span>\n  \n  main <span class=\"token operator\">=</span> <span class=\"token keyword\">do</span>\n           putStrLn <span class=\"token string\">\"Input Max n:\"</span>\n           n <span class=\"token operator\">&lt;</span>- readInt\n           <span class=\"token builtin class-name\">let</span> filename <span class=\"token operator\">=</span> <span class=\"token string\">\"ksmith\"</span> ++ show<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> ++ <span class=\"token string\">\".TXT\"</span>\n           writeFile filename <span class=\"token punctuation\">(</span>show $ smithNumber3 n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>1000000内找出所有3-Smith Numbers.<br>\n[73615,209065,225951,283745,305455,342879,656743,683670,729066,747948,774858,879221,954590]<br>\n可以看出，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^6</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">6</span></span></span></span></span></span></span></span></span></span></span>以内不存在4-Smith Numbers.<br>\n而后他使用1小时多的时间计算出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span>以内的结果。  </p>\n<p>次日liangbch表示他的C版本代码可以在10秒内解决同样的问题。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#include \"stdlib.h\"</span>\n<span class=\"token comment\">#include \"stdio.h\"</span>\n<span class=\"token comment\">#include \"math.h\"</span>\n<span class=\"token comment\">#include \"memory.h\"</span>\n\ntypedef unsigned __int64 UINT64<span class=\"token punctuation\">;</span>\ntypedef unsigned long DWORD<span class=\"token punctuation\">;</span>\ntypedef unsigned short WORD<span class=\"token punctuation\">;</span>\ntypedef unsigned char BYTE<span class=\"token punctuation\">;</span>\n\n\n//文件描述：使用最简单的方法筛素数\n\n// 一定范围内质数的个数\n//                           <span class=\"token number\">10</span>                            <span class=\"token number\">4</span>\n//                          <span class=\"token number\">100</span>                           <span class=\"token number\">25</span>\n//                        <span class=\"token number\">1,000</span>                          <span class=\"token number\">168</span>\n//                       <span class=\"token number\">10,000</span>                        <span class=\"token number\">1,229</span>\n//                      <span class=\"token number\">100,000</span>                        <span class=\"token number\">9,592</span>\n//                    <span class=\"token number\">1,000</span>,000                       <span class=\"token number\">78,498</span>\n//                   <span class=\"token number\">10,000</span>,000                      <span class=\"token number\">664,579</span>\n//                  <span class=\"token number\">100,000</span>,000                    <span class=\"token number\">5,761</span>,455\n//                <span class=\"token number\">1,000</span>,000,000                   <span class=\"token number\">50,847</span>,534\n//               <span class=\"token number\">10,000</span>,000,000                  <span class=\"token number\">455,052</span>,511\n//              <span class=\"token number\">100,000</span>,000,000                <span class=\"token number\">4,118</span>,054,813\n//            <span class=\"token number\">1,000</span>,000,000,000               <span class=\"token number\">37,607</span>,912,018\n//           <span class=\"token number\">10,000</span>,000,000,000              <span class=\"token number\">346,065</span>,536,839\n//          <span class=\"token number\">100,000</span>,000,000,000            <span class=\"token number\">3,204</span>,941,750,802\n//        <span class=\"token number\">1,000</span>,000,000,000,000           <span class=\"token number\">29,844</span>,570,422,669\n//       <span class=\"token number\">10,000</span>,000,000,000,000          <span class=\"token number\">279,238</span>,341,033,925\n//      <span class=\"token number\">100,000</span>,000,000,000,000        <span class=\"token number\">2,623</span>,557,157,654,233\n//    <span class=\"token number\">1,000</span>,000,000,000,000,000       <span class=\"token number\">24,739</span>,954,287,740,860\n//  估计x 范围内的质数的个数， 欧拉公式 pi<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span>x /<span class=\"token punctuation\">(</span> ln<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\n// 经过测试，\n// 在1-1百万之间，相邻2个质数的最大差为114,这两个质数分别为492113,492227\n// 在1-1千万之间，相邻2个质数的最大差为154,这两个质数分别为4652353,4652507\n// 在1-3千万之间，相邻2个质数的最大差为210,这两个质数分别为20831323,20831533\n// 在1-1亿之间，  相邻2个质数的最大差为220,这两个质数分别为47326693,47326913\n\n\n//计算n以内素数个数的上限\nUINT64 maxPrimeCount<span class=\"token punctuation\">(</span>UINT64 n<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n        double <span class=\"token assign-left variable\">f</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>double<span class=\"token punctuation\">)</span>n / log<span class=\"token variable\"><span class=\"token punctuation\">((</span>double<span class=\"token punctuation\">)</span>n<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10.0</span><span class=\"token operator\">/</span><span class=\"token number\">9.0</span> <span class=\"token operator\">+</span><span class=\"token number\">32</span><span class=\"token punctuation\">;</span>\n        return <span class=\"token punctuation\">(</span>UINT64<span class=\"token punctuation\">)</span>f<span class=\"token punctuation\">;</span>\n}\n\nDWORD Sift32<span class=\"token punctuation\">(</span>DWORD n<span class=\"token punctuation\">,</span>DWORD <span class=\"token operator\">*</span>primeTab<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">/</span> 对<span class=\"token number\">0</span>到n 之间<span class=\"token punctuation\">(</span>不包括n<span class=\"token punctuation\">)</span>的数进行筛选，返回质数的个数\n<span class=\"token operator\">/</span><span class=\"token operator\">/</span> n 不能大于L2 cache，否则效能很低\n<span class=\"token operator\">/</span><span class=\"token operator\">/</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span>\n{\n        BYTE <span class=\"token operator\">*</span>pBuff<span class=\"token operator\">=</span> new BYTE[n]<span class=\"token punctuation\">;</span>\n        if <span class=\"token punctuation\">(</span>pBuff<span class=\"token operator\">==</span>NULL<span class=\"token punctuation\">)</span>\n                return <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n        DWORD i<span class=\"token punctuation\">,</span>sqrt_n<span class=\"token punctuation\">,</span>p<span class=\"token punctuation\">;</span>\n        DWORD pn<span class=\"token punctuation\">;</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">/</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\n        sqrt_n<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>DWORD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>sqrt<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        while <span class=\"token punctuation\">(</span>sqrt_n <span class=\"token operator\">*</span> sqrt_n <span class=\"token operator\">>=</span>n<span class=\"token punctuation\">)</span>\n                sqrt_n<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        \n        memset<span class=\"token punctuation\">(</span>pBuff<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>n<span class=\"token operator\">*</span>sizeof<span class=\"token punctuation\">(</span>BYTE<span class=\"token punctuation\">))</span></span><span class=\"token punctuation\">;</span>\n        *pBuff<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        *<span class=\"token punctuation\">(</span>pBuff+1<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> //1不是质数\n        *<span class=\"token punctuation\">(</span>pBuff+2<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> //2是质数\n\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span><span class=\"token assign-left variable\">i</span><span class=\"token operator\">+=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> //筛去2的倍数，不包括2\n                *<span class=\"token punctuation\">(</span>pBuff+i<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>sqrt_n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> //i 是质数\n        <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>p<span class=\"token operator\">=</span>i*i<span class=\"token punctuation\">;</span>p<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span> <span class=\"token assign-left variable\">p</span><span class=\"token operator\">+=</span><span class=\"token number\">2</span>*i<span class=\"token punctuation\">)</span>\n                        *<span class=\"token punctuation\">(</span>pBuff+p<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> //筛去i 的奇数倍\n                <span class=\"token assign-left variable\">i</span><span class=\"token operator\">+=</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span> *<span class=\"token punctuation\">(</span>pBuff+i<span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token punctuation\">)</span> \n                        i++<span class=\"token punctuation\">;</span> //前进到下一个质数\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token assign-left variable\">pn</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> //素数个数\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>i++<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pBuff<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                        primeTab<span class=\"token punctuation\">[</span>pn++<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>i<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        delete<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> pBuff<span class=\"token punctuation\">;</span>\n        <span class=\"token builtin class-name\">return</span> pn<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">#include &lt;stdlib.h></span>\n<span class=\"token comment\">#include &lt;stdio.h></span>\n<span class=\"token comment\">#include &lt;math.h></span>\n<span class=\"token comment\">#include &lt;memory.h></span>\n<span class=\"token comment\">#include &lt;windows.h></span>\n<span class=\"token comment\">#include &lt;assert.h></span>\n\ntypedef unsigned __int64 UINT64<span class=\"token punctuation\">;</span>\n\ntypedef unsigned long DWORD<span class=\"token punctuation\">;</span>\ntypedef unsigned short WORD<span class=\"token punctuation\">;</span>\ntypedef unsigned char BYTE<span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">#define SIFT_BLOCK_LEN        (64*1024)</span>\n\ntypedef struct fac_struct\n<span class=\"token punctuation\">{</span>\n        DWORD n<span class=\"token punctuation\">;</span>\n        WORD digSum<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>FAC_ST<span class=\"token punctuation\">;</span>\n\nBYTE        g_digSumTab<span class=\"token punctuation\">[</span><span class=\"token number\">10000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nFAC_ST        g_facArray<span class=\"token punctuation\">[</span>SIFT_BLOCK_LEN+1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\nextern UINT64 maxPrimeCount<span class=\"token punctuation\">(</span>UINT64 n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nextern DWORD Sift32<span class=\"token punctuation\">(</span>DWORD n,DWORD *primeTab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nWORD getDigSum<span class=\"token punctuation\">(</span>DWORD n<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n        DWORD <span class=\"token assign-left variable\">s</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>n<span class=\"token operator\">></span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                <span class=\"token assign-left variable\">s</span><span class=\"token operator\">+=</span> <span class=\"token punctuation\">(</span>n % <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                n/<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token builtin class-name\">return</span> <span class=\"token punctuation\">(</span>WORD<span class=\"token punctuation\">)</span>s<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nWORD getDigSum2<span class=\"token punctuation\">(</span>DWORD n<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n        assert<span class=\"token punctuation\">(</span>g_digSumTab<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        DWORD <span class=\"token assign-left variable\">s</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token operator\">&lt;</span><span class=\"token number\">10000</span><span class=\"token punctuation\">)</span>\n                <span class=\"token builtin class-name\">return</span> g_digSumTab<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token operator\">&lt;</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                DWORD <span class=\"token assign-left variable\">t</span><span class=\"token operator\">=</span>n % <span class=\"token number\">10000</span><span class=\"token punctuation\">;</span>\n                n/<span class=\"token operator\">=</span><span class=\"token number\">10000</span><span class=\"token punctuation\">;</span>\n                <span class=\"token builtin class-name\">return</span> g_digSumTab<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span>+g_digSumTab<span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">{</span>\n                DWORD t0,t1<span class=\"token punctuation\">;</span>\n                <span class=\"token assign-left variable\">t0</span><span class=\"token operator\">=</span>n % <span class=\"token number\">10000</span><span class=\"token punctuation\">;</span>\n                n/<span class=\"token operator\">=</span><span class=\"token number\">10000</span><span class=\"token punctuation\">;</span>\n                <span class=\"token assign-left variable\">t1</span><span class=\"token operator\">=</span>n % <span class=\"token number\">10000</span><span class=\"token punctuation\">;</span>\n                n/<span class=\"token operator\">=</span><span class=\"token number\">10000</span><span class=\"token punctuation\">;</span>\n                <span class=\"token builtin class-name\">return</span> g_digSumTab<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span>+g_digSumTab<span class=\"token punctuation\">[</span>t0<span class=\"token punctuation\">]</span>+g_digSumTab<span class=\"token punctuation\">[</span>t1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nvoid initTable<span class=\"token punctuation\">(</span>BYTE *tab,DWORD n<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n        DWORD i<span class=\"token punctuation\">;</span>\n        assert<span class=\"token punctuation\">(</span>n<span class=\"token operator\">==</span><span class=\"token number\">10</span> <span class=\"token operator\">||</span> <span class=\"token assign-left variable\">n</span><span class=\"token operator\">==</span><span class=\"token number\">100</span> <span class=\"token operator\">||</span> <span class=\"token assign-left variable\">n</span><span class=\"token operator\">==</span><span class=\"token number\">1000</span> <span class=\"token operator\">||</span> <span class=\"token assign-left variable\">n</span><span class=\"token operator\">==</span><span class=\"token number\">10000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>n<span class=\"token punctuation\">;</span>i++<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                tab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>BYTE<span class=\"token punctuation\">)</span>getDigSum<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\nvoid searchSmithNumber<span class=\"token punctuation\">(</span>DWORD n,const char *fileName<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n        DWORD *primeTab<span class=\"token operator\">=</span>NULL<span class=\"token punctuation\">;</span>\n        DWORD base<span class=\"token punctuation\">;</span>\n        DWORD s_n<span class=\"token punctuation\">;</span>\n        DWORD primeCount<span class=\"token punctuation\">;</span>\n        DWORD i,count<span class=\"token punctuation\">;</span>\n        DWORD time1,time2<span class=\"token punctuation\">;</span>\n        DWORD c<span class=\"token punctuation\">;</span>\n        DWORD numBuff<span class=\"token punctuation\">[</span><span class=\"token number\">1024</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        int   countInBuff<span class=\"token punctuation\">;</span>\n        FILE *fp<span class=\"token operator\">=</span>NULL<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fileName<span class=\"token operator\">!=</span>NULL<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                <span class=\"token assign-left variable\">fp</span><span class=\"token operator\">=</span>fopen<span class=\"token punctuation\">(</span>fileName,<span class=\"token string\">\"wb\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token assign-left variable\">time1</span><span class=\"token operator\">=</span>GetTickCount<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        initTable<span class=\"token punctuation\">(</span>g_digSumTab,10000 <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        s_n <span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>DWORD<span class=\"token punctuation\">)</span>sqrt<span class=\"token punctuation\">((</span>double<span class=\"token punctuation\">)</span>n<span class=\"token punctuation\">)</span>+2<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>s_n * s_n <span class=\"token operator\">></span>n<span class=\"token punctuation\">)</span>\n                s_n--<span class=\"token punctuation\">;</span>\n\n        //估算s_n以内素数个数的上限<span class=\"token punctuation\">;</span>\n        <span class=\"token assign-left variable\">c</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>DWORD<span class=\"token punctuation\">)</span>maxPrimeCount<span class=\"token punctuation\">(</span>s_n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token assign-left variable\">primeTab</span><span class=\"token operator\">=</span>new DWORD<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>primeTab<span class=\"token operator\">==</span>NULL <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                goto thisExit<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token assign-left variable\">primeCount</span><span class=\"token operator\">=</span>Sift32<span class=\"token punctuation\">(</span>s_n+1,primeTab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token assign-left variable\">count</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>        <span class=\"token assign-left variable\">base</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token assign-left variable\">countInBuff</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>base<span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>n<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                DWORD <span class=\"token assign-left variable\">end</span><span class=\"token operator\">=</span>base+SIFT_BLOCK_LEN-1<span class=\"token punctuation\">;</span>\n                \n                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>SIFT_BLOCK_LEN<span class=\"token punctuation\">;</span>i++<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                        g_facArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>.n<span class=\"token operator\">=</span>base+i<span class=\"token punctuation\">;</span>\n                        g_facArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>.digSum<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                \n                <span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>*primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>end <span class=\"token operator\">&amp;&amp;</span> i<span class=\"token operator\">&lt;</span>primeCount<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                        DWORD k,m<span class=\"token punctuation\">;</span>\n                        \n                        <span class=\"token assign-left variable\">k</span><span class=\"token operator\">=</span> base/primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>k<span class=\"token operator\">&lt;</span>primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                                <span class=\"token assign-left variable\">k</span><span class=\"token operator\">=</span>primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token assign-left variable\">m</span><span class=\"token operator\">=</span> k*primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m<span class=\"token operator\">&lt;</span>base<span class=\"token punctuation\">)</span>\n                                <span class=\"token assign-left variable\">m</span><span class=\"token operator\">+=</span> primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                        \n                        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>m <span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>end<span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">{</span>\n                                <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span> g_facArray<span class=\"token punctuation\">[</span>m-base<span class=\"token punctuation\">]</span>.n  % primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token punctuation\">)</span>\n                                <span class=\"token punctuation\">{</span>\n                                        g_facArray<span class=\"token punctuation\">[</span>m-base<span class=\"token punctuation\">]</span>.n /<span class=\"token operator\">=</span> primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> \n                                        g_facArray<span class=\"token punctuation\">[</span>m-base<span class=\"token punctuation\">]</span>.digSum <span class=\"token operator\">+=</span> getDigSum2<span class=\"token punctuation\">(</span>primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                <span class=\"token punctuation\">}</span>\n                                <span class=\"token assign-left variable\">m</span><span class=\"token operator\">+=</span> primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span>\n                        i++<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                \n                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>SIFT_BLOCK_LEN <span class=\"token operator\">&amp;&amp;</span> i+base<span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>n<span class=\"token punctuation\">;</span>i++<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                        DWORD <span class=\"token assign-left variable\">x</span><span class=\"token operator\">=</span>i+base<span class=\"token punctuation\">;</span>\n                        WORD <span class=\"token assign-left variable\">s1</span><span class=\"token operator\">=</span> getDigSum2<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        WORD <span class=\"token assign-left variable\">s2</span><span class=\"token operator\">=</span> g_facArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>.digSum<span class=\"token punctuation\">;</span>\n                         \n                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> g_facArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>.n <span class=\"token operator\">!=</span><span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> g_facArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>.n <span class=\"token operator\">!=</span> x<span class=\"token punctuation\">)</span>\n                                <span class=\"token assign-left variable\">s2</span><span class=\"token operator\">+=</span>getDigSum2<span class=\"token punctuation\">(</span>g_facArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>.n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s1<span class=\"token operator\">==</span>s2 <span class=\"token operator\">&amp;&amp;</span> s<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">{</span>\n                                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fp<span class=\"token operator\">!=</span>NULL<span class=\"token punctuation\">)</span>\n                                <span class=\"token punctuation\">{</span>\n                                        numBuff<span class=\"token punctuation\">[</span>countInBuff++<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>x<span class=\"token punctuation\">;</span>\n                                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> countInBuff*sizeof<span class=\"token punctuation\">(</span>DWORD<span class=\"token punctuation\">)</span><span class=\"token operator\">></span><span class=\"token operator\">=</span>sizeof<span class=\"token punctuation\">(</span>numBuff<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n                                        <span class=\"token punctuation\">{</span>\n                                                fwrite<span class=\"token punctuation\">(</span>numBuff,sizeof<span class=\"token punctuation\">(</span>DWORD<span class=\"token punctuation\">)</span>,countInBuff,fp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                                <span class=\"token assign-left variable\">countInBuff</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n                                        <span class=\"token punctuation\">}</span>\n                                <span class=\"token punctuation\">}</span>\n                                count++<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#ifdef _DEBUG</span>\n                                printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"%u<span class=\"token entity\" title=\"\\n\">\\n</span>\"</span>,x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#endif</span>\n                        <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n\n                <span class=\"token assign-left variable\">base</span><span class=\"token operator\">+=</span> SIFT_BLOCK_LEN<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fp<span class=\"token operator\">!=</span>NULL <span class=\"token operator\">&amp;&amp;</span> countInBuff<span class=\"token operator\">!=</span><span class=\"token number\">0</span> <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                fwrite<span class=\"token punctuation\">(</span>numBuff,sizeof<span class=\"token punctuation\">(</span>DWORD<span class=\"token punctuation\">)</span>,countInBuff,fp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token assign-left variable\">time2</span><span class=\"token operator\">=</span>GetTickCount<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>-time1<span class=\"token punctuation\">;</span>\n        printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"It take %d ms,total %d smith num within %d<span class=\"token entity\" title=\"\\n\">\\n</span>\"</span>,time2,count,n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nthisExit:\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>primeTab<span class=\"token operator\">!=</span>NULL<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                delete<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> primeTab<span class=\"token punctuation\">;</span>        <span class=\"token assign-left variable\">primeTab</span><span class=\"token operator\">=</span>NULL<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fp<span class=\"token operator\">!=</span>NULL<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                fclose<span class=\"token punctuation\">(</span>fp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token assign-left variable\">fp</span><span class=\"token operator\">=</span>NULL<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">#include \"stdlib.h\"</span>\n<span class=\"token comment\">#include \"searchSmithNum.h\"</span>\n\nvoid searchSmithNumber<span class=\"token punctuation\">(</span>DWORD n,const char *fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nint main<span class=\"token punctuation\">(</span>int argc, char* argv<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n        DWORD <span class=\"token assign-left variable\">n</span><span class=\"token operator\">=</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">;</span>        \n        searchSmithNumber<span class=\"token punctuation\">(</span>n,NULL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //不输出\n        //searchSmithNumber<span class=\"token punctuation\">(</span>n,<span class=\"token string\">\"smith.dat\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //输出到2进制文件 \n        \n        //计算10^8以内的smith数,不输出，在 PM1.7 需 <span class=\"token number\">23.766</span>秒,若输出到话，时间将轻微增加，为24.109秒\n        //计算10^9以内的smith数,不输出，在 PM1.7 需 <span class=\"token number\">252.578</span>秒\n        <span class=\"token builtin class-name\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>然后经过分析，liangbch得出,在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span>以内， 4阶smith数找到38组，见下：  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">4463535,4463536</span>,4463537,4463538\n<span class=\"token number\">6356910,6356911</span>,6356912,6356913\n<span class=\"token number\">8188933,8188934</span>,8188935,8188936\n<span class=\"token number\">9425550,9425551</span>,9425552,9425553\n<span class=\"token number\">11148564,11148565</span>,11148566,11148567\n<span class=\"token number\">15966114,15966115</span>,15966116,15966117\n<span class=\"token number\">15966115,15966116</span>,15966117,15966118\n<span class=\"token number\">18542654,18542655</span>,18542656,18542657\n<span class=\"token number\">21673542,21673543</span>,21673544,21673545\n<span class=\"token number\">22821992,22821993</span>,22821994,22821995\n<span class=\"token number\">23767287,23767288</span>,23767289,23767290\n<span class=\"token number\">28605144,28605145</span>,28605146,28605147\n<span class=\"token number\">36615667,36615668</span>,36615669,36615670\n<span class=\"token number\">39227466,39227467</span>,39227468,39227469\n<span class=\"token number\">47096634,47096635</span>,47096636,47096637\n<span class=\"token number\">47395362,47395363</span>,47395364,47395365\n<span class=\"token number\">48072396,48072397</span>,48072398,48072399\n<span class=\"token number\">54054264,54054265</span>,54054266,54054267\n<span class=\"token number\">55464835,55464836</span>,55464837,55464838\n<span class=\"token number\">57484614,57484615</span>,57484616,57484617\n<span class=\"token number\">57756450,57756451</span>,57756452,57756453\n<span class=\"token number\">57761165,57761166</span>,57761167,57761168\n<span class=\"token number\">58418508,58418509</span>,58418510,58418511\n<span class=\"token number\">61843387,61843388</span>,61843389,61843390\n<span class=\"token number\">62577157,62577158</span>,62577159,62577160\n<span class=\"token number\">64572186,64572187</span>,64572188,64572189\n<span class=\"token number\">65484066,65484067</span>,65484068,65484069\n<span class=\"token number\">66878432,66878433</span>,66878434,66878435\n<span class=\"token number\">67118680,67118681</span>,67118682,67118683\n<span class=\"token number\">71845857,71845858</span>,71845859,71845860\n<span class=\"token number\">75457380,75457381</span>,75457382,75457383\n<span class=\"token number\">75457381,75457382</span>,75457383,75457384\n<span class=\"token number\">77247606,77247607</span>,77247608,77247609\n<span class=\"token number\">78432168,78432169</span>,78432170,78432171\n<span class=\"token number\">88099213,88099214</span>,88099215,88099216\n<span class=\"token number\">89653781,89653782</span>,89653783,89653784\n<span class=\"token number\">90166567,90166568</span>,90166569,90166570\n<span class=\"token number\">92656434,92656435</span>,92656436,92656437</code></pre></div>\n<p>在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span>以内，5阶smith数只找到 2组，见下。而5阶以上的smith数，则没有发现。  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">15966114,15966115</span>,15966116,15966117,15966118\n<span class=\"token number\">75457380,75457381</span>,75457382,75457383,75457384</code></pre></div>\n<p>然后他重新计算到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">9</span></span></span></span></span></span></span></span></span></span></span>, 4阶smith数达到384个，而5阶smith数也达到14个，见下。而5阶以上smith数则依然没有发现。  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">15966114,15966115</span>,15966116,15966117,15966118\n<span class=\"token number\">75457380,75457381</span>,75457382,75457383,75457384\n<span class=\"token number\">162449165,162449166</span>,162449167,162449168,162449169\n<span class=\"token number\">296049306,296049307</span>,296049308,296049309,296049310\n<span class=\"token number\">296861735,296861736</span>,296861737,296861738,296861739\n<span class=\"token number\">334792990,334792991</span>,334792992,334792993,334792994\n<span class=\"token number\">429619207,429619208</span>,429619209,429619210,429619211\n<span class=\"token number\">581097690,581097691</span>,581097692,581097693,581097694\n<span class=\"token number\">581519244,581519245</span>,581519246,581519247,581519248\n<span class=\"token number\">582548088,582548089</span>,582548090,582548091,582548092\n<span class=\"token number\">683474015,683474016</span>,683474017,683474018,683474019\n<span class=\"token number\">809079150,809079151</span>,809079152,809079153,809079154\n<span class=\"token number\">971285861,971285862</span>,971285863,971285864,971285865\n<span class=\"token number\">977218716,977218717</span>,977218718,977218719,977218720</code></pre></div>\n<p>2018年11月30日，suan1024<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=926&#x26;pid=12483&#x26;fromuid=20\">建议了一种改进算法</a>, 虽然有一点小问题，但是liangbch利用其思路将代码速度有提高了一倍。\n对应改进代码片段为</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>*primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>end <span class=\"token operator\">&amp;&amp;</span> i<span class=\"token operator\">&lt;</span>primeCount<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n        DWORD k,m,np<span class=\"token punctuation\">;</span>\n        DWORD npx<span class=\"token punctuation\">;</span>\n        DWORD npx_end<span class=\"token punctuation\">;</span>\n        BYTE dsum<span class=\"token punctuation\">;</span>\n\n        <span class=\"token assign-left variable\">np</span><span class=\"token operator\">=</span>primeTab<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token assign-left variable\">dsum</span><span class=\"token operator\">=</span>getDigSum2<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token assign-left variable\">k</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>base + np-1<span class=\"token punctuation\">)</span>/np<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>  k<span class=\"token operator\">&lt;</span>np<span class=\"token punctuation\">)</span>\n                <span class=\"token assign-left variable\">k</span><span class=\"token operator\">=</span>np<span class=\"token punctuation\">;</span>\n        <span class=\"token assign-left variable\">m</span><span class=\"token operator\">=</span> k*np<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>m <span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>end<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                g_valueArray<span class=\"token punctuation\">[</span>m-base <span class=\"token punctuation\">]</span> /<span class=\"token operator\">=</span> np<span class=\"token punctuation\">;</span> \n                g_digSumArray<span class=\"token punctuation\">[</span>m-base<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> dsum<span class=\"token punctuation\">;</span>\n                <span class=\"token assign-left variable\">m</span><span class=\"token operator\">+=</span> np<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token assign-left variable\">npx</span><span class=\"token operator\">=</span>np<span class=\"token punctuation\">;</span>\n        <span class=\"token assign-left variable\">npx_end</span><span class=\"token operator\">=</span>end/npx<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>npx<span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>npx_end<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n                npx *<span class=\"token operator\">=</span> np<span class=\"token punctuation\">;</span>\n                <span class=\"token assign-left variable\">m</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>base + npx-1<span class=\"token punctuation\">)</span>/npx*npx<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>m <span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>end<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                        g_valueArray<span class=\"token punctuation\">[</span>m-base <span class=\"token punctuation\">]</span> /<span class=\"token operator\">=</span> np<span class=\"token punctuation\">;</span> \n                        g_digSumArray<span class=\"token punctuation\">[</span>m-base<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> dsum<span class=\"token punctuation\">;</span>\n                        <span class=\"token assign-left variable\">m</span><span class=\"token operator\">+=</span> npx<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        i++<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>已知最优结果</h2>\n<p>最后liangbch在网络上找到<a href=\"http://www.shyamsundergupta.com/smith.htm\">国外同行的最优进展</a><br>\n其中6阶smith数最小结果为</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">2050918644</span>, <span class=\"token number\">2050918645</span>, <span class=\"token number\">2050918646</span>, <span class=\"token number\">2050918647</span>, <span class=\"token number\">2050918648</span>, <span class=\"token number\">2050918649</span></code></pre></div>\n<p>medie2005<a href=\"https://www.primepuzzles.net/puzzles/puzz_247.htm\">在网络上发现了7阶结果</a> </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">7</span>-Smith numbers\n<span class=\"token assign-left variable\">164736913905</span><span class=\"token operator\">=</span><span class=\"token number\">3</span>*3*5*257*14244437   <span class=\"token punctuation\">(</span>dig_sum<span class=\"token operator\">=</span><span class=\"token number\">54</span><span class=\"token punctuation\">)</span>\n<span class=\"token assign-left variable\">164736913906</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>*61*109*139*89123   <span class=\"token punctuation\">(</span>dig_sum<span class=\"token operator\">=</span><span class=\"token number\">55</span><span class=\"token punctuation\">)</span>\n<span class=\"token assign-left variable\">164736913907</span><span class=\"token operator\">=</span><span class=\"token number\">31</span>*31*2293*74759      <span class=\"token punctuation\">(</span>dig_sum<span class=\"token operator\">=</span><span class=\"token number\">56</span><span class=\"token punctuation\">)</span>\n<span class=\"token assign-left variable\">164736913908</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>*2*3*7*1961153737  <span class=\"token punctuation\">(</span>dig_sum<span class=\"token operator\">=</span><span class=\"token number\">57</span><span class=\"token punctuation\">)</span>\n<span class=\"token assign-left variable\">164736913909</span><span class=\"token operator\">=</span><span class=\"token number\">3947</span>*41737247            <span class=\"token punctuation\">(</span>dig_sum<span class=\"token operator\">=</span><span class=\"token number\">58</span><span class=\"token punctuation\">)</span>\n<span class=\"token assign-left variable\">164736913910</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>*5*19*41*21147229  <span class=\"token punctuation\">(</span>dig_sum<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\n<span class=\"token assign-left variable\">164736913911</span><span class=\"token operator\">=</span><span class=\"token number\">3</span>*293*187414009         <span class=\"token punctuation\">(</span>dig_sum<span class=\"token operator\">=</span><span class=\"token number\">51</span><span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"k-smith-numbers"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"k-smith-numbers"}}}