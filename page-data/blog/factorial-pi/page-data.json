{"componentChunkName":"component---src-templates-page-js","path":"/blog/factorial-pi","webpackCompilationHash":"4257a79b58f84cc2c6ce","result":{"data":{"markdownRemark":{"frontmatter":{"title":"圆周率与阶乘的数字握手","date":"Wed, 18th December 2019","tags":["阶乘","圆周率"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQFA//EABYBAQEBAAAAAAAAAAAAAAAAAAEDAP/aAAwDAQACEAMQAAAB7ZutNaRKyvEhA//EABwQAAIBBQEAAAAAAAAAAAAAAAEDAgAEERIyIv/aAAgBAQABBQJqjiaKhbjUT8MYNdKWcAcs6//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABYRAQEBAAAAAAAAAAAAAAAAABABIf/aAAgBAgEBPwHSn//EAB8QAAEDBAMBAAAAAAAAAAAAAAEAAhEQISJhEjFRcf/aAAgBAQAGPwKzYXYQ5GD9UsdbazEnxZOjVJgU/8QAHRAAAgMAAgMAAAAAAAAAAAAAASEAETFBYXGR8P/aAAgBAQABPyF0hpyED24Kv3A6ogtiIFr0aG1ARn5krtg8BkIiAKMeIU//2gAMAwEAAgADAAAAEPgAvP/EABgRAAMBAQAAAAAAAAAAAAAAAAABETEh/9oACAEDAQE/EE1eFFgsP//EABoRAAEFAQAAAAAAAAAAAAAAAAABEBEhMVH/2gAIAQIBAT8QnBfTaN//xAAeEAEAAwEAAQUAAAAAAAAAAAABABEhQTFRYXGB0f/aAAgBAQABPxBwCBa0D7iYO0sfuMXFDCDE41CHEaWH0yXebQ8D1/QpL8G6ig4WywOmpRhLVAXFV8T/2Q==","width":150,"height":150,"src":"/static/4b3a9df345f1b34f923044e3eeec3a72/44086/digitalhand.jpg","srcSet":"/static/4b3a9df345f1b34f923044e3eeec3a72/44086/digitalhand.jpg 1x,\n/static/4b3a9df345f1b34f923044e3eeec3a72/1caf6/digitalhand.jpg 1.5x,\n/static/4b3a9df345f1b34f923044e3eeec3a72/792e8/digitalhand.jpg 2x"}}}},"html":"<p>medie2005<a href=\"https://bbs.emath.ac.cn/forum.php?mod=viewthread&#x26;tid=969&#x26;fromuid=20\">于2008年12月提问</a>，请找出第一个满足n!=31415926xxxx...xxx的整数n。 (其中xxxx表示任意数字）<br>\n表示这个问题很困难的无心人勇攀高峰，最后找出了1544607046599!=31415926535899498xxx...xxx。\n这些结果提交到了<a href=\"https://oeis.org/A328955\">A328955</a> .<br>\n2019年12月18日，Ickiverar更上一层楼，找出\n119027672349942!=31415926535897xxx...xxx</p>\n<h1>详细内容</h1>\n<p>gxqcn<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=12665&#x26;fromuid=20\">首先提议用斯特林公式去搜索</a>， medie2005说<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=12671&#x26;fromuid=20\">减少一位要求还是很容易</a>的，他自己很快给出3012584!=3141592x...x，但是他表示再增加一位就很困难了\n然后他在一个半小时后给出了5385973!=31415926x...x。<br>\n但是gxqcn用他的<a href=\"https://www.emath.ac.cn/software.htm\">HugeCalc</a>计算了一下，发现<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=12693&#x26;fromuid=20\">medie2005的计算精度不够</a>。<br>\nmathe强调应该像qxqcn所说的用Stirling公式独立计算各个阶乘而不应该通过连乘来计算，不然会很容易丢失精度。并且mathe表示用Stirling公式<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=12699&#x26;fromuid=20\">只需要double类型数据</a>来表示就可以了，但是后面可以看出，问题远远没有这么简单。  </p>\n<p>对于比较大的n,使用stirling级数精度可以达到非常之高:\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ln</mi><mo>⁡</mo><mi mathvariant=\"normal\">Γ</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>ln</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mn>2</mn><mi>π</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mo stretchy=\"false\">(</mo><mi>z</mi><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy=\"false\">)</mo><mi>ln</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>z</mi><mo>+</mo><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mfrac><msub><mi>B</mi><mrow><mn>2</mn><mi>n</mi></mrow></msub><mrow><mn>2</mn><mi>n</mi><mo stretchy=\"false\">(</mo><mn>2</mn><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><msup><mi>z</mi><mrow><mn>2</mn><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\ln\\Gamma(z)=\\frac12\\ln(2\\pi)+(z-\\frac12)\\ln(z)-z+\\sum_{n=1}^{\\infty}\\frac{B_{2n}}{2n(2n-1)z^{2n-1}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">ln</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">Γ</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">ln</span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">ln</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.4084309999999998em;vertical-align:-0.52em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8884309999999999em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463142857142857em;\"><span style=\"top:-2.786em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4101em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>ln</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mn>2</mn><mi>π</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mo stretchy=\"false\">(</mo><mi>z</mi><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy=\"false\">)</mo><mi>ln</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>z</mi><mo>+</mo><mfrac><mn>1</mn><mrow><mn>12</mn><mi>z</mi></mrow></mfrac><mo>−</mo><mfrac><mn>1</mn><mrow><mn>360</mn><msup><mi>z</mi><mn>3</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mn>1</mn><mrow><mn>1260</mn><msup><mi>z</mi><mn>5</mn></msup></mrow></mfrac><mo>−</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">=\\frac12\\ln(2\\pi)+(z-\\frac12)\\ln(z)-z+\\frac1{12z}-\\frac1{360z^3}+\\frac1{1260z^5}-...</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">ln</span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">ln</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span><span class=\"mord mtight\">6</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463142857142857em;\"><span style=\"top:-2.786em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">2</span><span class=\"mord mtight\">6</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463142857142857em;\"><span style=\"top:-2.786em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.10556em;vertical-align:0em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span></span></span></span><br>\n其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>B</mi><mrow><mn>2</mn><mi>n</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">B_{2n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>为贝努利数。<br>\n<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=12706&#x26;fromuid=20\">liangbch指出double类型精度是不够</a>的:<br>\n因为double型数可精确到15-16位有小数字，如果斯特林公式是精确的，使用斯特林公式来计算log10(n!) 可精确到15-16位有效数字，而这15-16位有效数字又分成整数部分和小数部分，现在的要求尾数（小数部分必须达到8位），那么整数部分至多就不能超过7位了，所有当n!大于<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>7</mn></msup></mrow><annotation encoding=\"application/x-tex\">10^7</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span></span></span>时，就无法使用double型来估算了，必须采用更高的精度。<br>\n无心人开始开启了刷机模式，他的<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=12726&#x26;fromuid=20\">第一个版本代码</a>将各个数字取对数然后进行连加,然后发现精度很快就不够了，于是他决定用mpfr进行高精度运算。</p>\n<p>下面是他<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=12842&#x26;fromuid=20\">使用了mpfr后的代码</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#include &lt;gmp.h></span>\n<span class=\"token comment\">#include &lt;mpfr.h></span>\n<span class=\"token comment\">#include &lt;stdio.h></span>\n\n<span class=\"token comment\">#define DefaultBitLength 128</span>\n\nint main<span class=\"token punctuation\">(</span>void<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  mpfr_t a, b, low, hi, lf, t<span class=\"token punctuation\">;</span>\n  double dLow, dHi, dLf, dA<span class=\"token punctuation\">;</span>\n  int <span class=\"token function\">find</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  long i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  \n  mpfr_init2<span class=\"token punctuation\">(</span>a, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_set_d<span class=\"token punctuation\">(</span>a, <span class=\"token number\">2.0</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_init2<span class=\"token punctuation\">(</span>b, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_set_d<span class=\"token punctuation\">(</span>b, <span class=\"token number\">1.0</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_init2<span class=\"token punctuation\">(</span>low, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_init2<span class=\"token punctuation\">(</span>hi, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_init2<span class=\"token punctuation\">(</span>lf, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_set_d<span class=\"token punctuation\">(</span>lf, <span class=\"token number\">0.0</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_init2<span class=\"token punctuation\">(</span>t, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入上界: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  scanf<span class=\"token punctuation\">(</span><span class=\"token string\">\"%lf\"</span>, <span class=\"token operator\">&amp;</span>dHi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入下界: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  scanf<span class=\"token punctuation\">(</span><span class=\"token string\">\"%lf\"</span>, <span class=\"token operator\">&amp;</span>dLow<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n//  printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"当前界限[%f, %f]<span class=\"token entity\" title=\"\\n\">\\n</span>\"</span>, dLow, dHi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  mpfr_set_d<span class=\"token punctuation\">(</span>low, dLow, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_set_d<span class=\"token punctuation\">(</span>hi, dHi, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  mpfr_log10<span class=\"token punctuation\">(</span>low, low, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_log10<span class=\"token punctuation\">(</span>hi, hi, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{</span>\n    mpfr_log10<span class=\"token punctuation\">(</span>t, a, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_add<span class=\"token punctuation\">(</span>lf, lf, t, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mpfr_cmp_d<span class=\"token punctuation\">(</span>lf, <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span><span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n      mpfr_sub_ui<span class=\"token punctuation\">(</span>lf, lf, <span class=\"token number\">1</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span>mpfr_cmp<span class=\"token punctuation\">(</span>lf<span class=\"token punctuation\">,</span> low<span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>mpfr_cmp<span class=\"token punctuation\">(</span>lf<span class=\"token punctuation\">,</span> hi<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">))</span></span>\n     <span class=\"token punctuation\">{</span>\n       <span class=\"token function\">find</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n       <span class=\"token builtin class-name\">break</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n\n    mpfr_add<span class=\"token punctuation\">(</span>a, a, b, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mpfr_cmp_d<span class=\"token punctuation\">(</span>a, <span class=\"token number\">10.0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span><span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      i++<span class=\"token punctuation\">;</span>\n      mpfr_div_ui<span class=\"token punctuation\">(</span>b, b, <span class=\"token number\">10</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      mpfr_add_ui<span class=\"token punctuation\">(</span>a, b, <span class=\"token number\">1</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n  <span class=\"token punctuation\">}</span> \n  \n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>find<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{</span>\n    dLf <span class=\"token operator\">=</span> mpfr_get_d1<span class=\"token punctuation\">(</span>lf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        mpfr_mul_ui<span class=\"token punctuation\">(</span>a, a, <span class=\"token number\">10</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        i--<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    dA <span class=\"token operator\">=</span> mpfr_get_d1<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"当前界限下的阶乘%.0f!, 对应的对数%.15f\"</span>, dA, dLf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  mpfr_clear<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_clear<span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_clear<span class=\"token punctuation\">(</span>low<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_clear<span class=\"token punctuation\">(</span>hi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  mpfr_clear<span class=\"token punctuation\">(</span>lf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_clear<span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin class-name\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>由此他找到了688395641!=3141592651957527xxx....xxx。\n但是他发现代码运行的有点慢，几经周折，<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=13275&#x26;fromuid=20\">决定还是使用Stirling公式</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#include &lt;gmp.h></span>\n<span class=\"token comment\">#include &lt;mpfr.h></span>\n<span class=\"token comment\">#include &lt;stdio.h></span>\n<span class=\"token comment\">#include &lt;math.h></span>\n\n<span class=\"token comment\">#define DefaultBitLength 128</span>\n\n  mpfr_t ln10, A<span class=\"token punctuation\">;</span>\n//<span class=\"token operator\">=</span><span class=\"token number\">1</span>/2ln<span class=\"token punctuation\">(</span><span class=\"token number\">2</span>π<span class=\"token punctuation\">)</span>+<span class=\"token punctuation\">(</span>n+1/2<span class=\"token punctuation\">)</span>ln<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>-n+1/12n\n//n <span class=\"token operator\">></span> <span class=\"token number\">10</span>^8 误差<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span>/360Z^3 <span class=\"token operator\">=</span> <span class=\"token number\">10</span>^<span class=\"token punctuation\">(</span>-26<span class=\"token punctuation\">)</span>\nlong double stirling<span class=\"token punctuation\">(</span>double n<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    mpfr_t a, b, c, s<span class=\"token punctuation\">;</span>\n    long double r<span class=\"token punctuation\">;</span>\n   \n    mpfr_init2<span class=\"token punctuation\">(</span>a, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_init2<span class=\"token punctuation\">(</span>b, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_set_d<span class=\"token punctuation\">(</span>a, n, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //a<span class=\"token operator\">=</span>n\n    mpfr_init2<span class=\"token punctuation\">(</span>c, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_set_d<span class=\"token punctuation\">(</span>b, <span class=\"token number\">12.0</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //b<span class=\"token operator\">=</span><span class=\"token number\">12</span>\n    mpfr_set_d<span class=\"token punctuation\">(</span>c, <span class=\"token number\">1.0</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //c<span class=\"token operator\">=</span><span class=\"token number\">1</span>\n    mpfr_init2<span class=\"token punctuation\">(</span>s, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    mpfr_div<span class=\"token punctuation\">(</span>b, c, b, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> // b <span class=\"token operator\">=</span> c / b <span class=\"token operator\">=</span> <span class=\"token number\">1</span>/12\n   \n    mpfr_div<span class=\"token punctuation\">(</span>b, b, a, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> // b <span class=\"token operator\">=</span> b / a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>/12n\n   \n    mpfr_sub<span class=\"token punctuation\">(</span>s, b, a, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //s <span class=\"token operator\">=</span> b - a <span class=\"token operator\">=</span> - n + <span class=\"token number\">1</span>/12n\n   \n    mpfr_log<span class=\"token punctuation\">(</span>c, a, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //c <span class=\"token operator\">=</span> ln<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>\n\n    mpfr_set_d<span class=\"token punctuation\">(</span>b, <span class=\"token number\">0.5</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_add<span class=\"token punctuation\">(</span>b, a, b, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_mul<span class=\"token punctuation\">(</span>b, b, c, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //b <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>n + <span class=\"token number\">1</span>/2<span class=\"token punctuation\">)</span>ln<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>\n   \n    mpfr_add<span class=\"token punctuation\">(</span>s, s, b, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //s <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>n + <span class=\"token number\">1</span>/2<span class=\"token punctuation\">)</span>ln<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> - n + <span class=\"token number\">1</span>/12n\n\n    mpfr_add<span class=\"token punctuation\">(</span>s, s, A, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //最终结果s<span class=\"token operator\">=</span><span class=\"token number\">1</span>/2ln<span class=\"token punctuation\">(</span><span class=\"token number\">2</span>*pi<span class=\"token punctuation\">)</span> + <span class=\"token punctuation\">(</span>n + <span class=\"token number\">1</span>/2<span class=\"token punctuation\">)</span>ln<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> - n + <span class=\"token number\">1</span>/12n\n\n    mpfr_div<span class=\"token punctuation\">(</span>s, s, ln10, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //转换为log10\n    mpfr_floor<span class=\"token punctuation\">(</span>b, s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_sub<span class=\"token punctuation\">(</span>s, s, b, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //只要小数\n   \n    r <span class=\"token operator\">=</span> mpfr_get_ld<span class=\"token punctuation\">(</span>s, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   \n    mpfr_clear<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_clear<span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_clear<span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mpfr_clear<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token builtin class-name\">return</span> r<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nint main<span class=\"token punctuation\">(</span>void<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  double a, b, low, hi, lf, t<span class=\"token punctuation\">;</span>\n  double start<span class=\"token punctuation\">;</span>\n  int <span class=\"token function\">find</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  long i <span class=\"token operator\">=</span> <span class=\"token number\">0</span>, j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  \n  mpfr_init2<span class=\"token punctuation\">(</span>ln10, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_init2<span class=\"token punctuation\">(</span>A, DefaultBitLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_set_d<span class=\"token punctuation\">(</span>ln10, <span class=\"token number\">10.0</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_log<span class=\"token punctuation\">(</span>ln10, ln10, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  mpfr_const_pi<span class=\"token punctuation\">(</span>A, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_mul_ui<span class=\"token punctuation\">(</span>A, A, <span class=\"token number\">2</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_log<span class=\"token punctuation\">(</span>A, A, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_div_ui<span class=\"token punctuation\">(</span>A, A, <span class=\"token number\">2</span>, GMP_RNDD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入起始搜索数字：\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  scanf<span class=\"token punctuation\">(</span><span class=\"token string\">\"%lf\"</span>, <span class=\"token operator\">&amp;</span>start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入上界: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  scanf<span class=\"token punctuation\">(</span><span class=\"token string\">\"%lf\"</span>, <span class=\"token operator\">&amp;</span>hi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"请输入下界: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  scanf<span class=\"token punctuation\">(</span><span class=\"token string\">\"%lf\"</span>, <span class=\"token operator\">&amp;</span>low<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  hi <span class=\"token operator\">=</span> log10<span class=\"token punctuation\">(</span>hi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  low <span class=\"token operator\">=</span> log10<span class=\"token punctuation\">(</span>low<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"起始位置：%.0f<span class=\"token entity\" title=\"\\n\">\\n</span>当前界限[%.15f, %.15f]<span class=\"token entity\" title=\"\\n\">\\n</span>\"</span>, start, low, hi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  a <span class=\"token operator\">=</span> start<span class=\"token punctuation\">;</span>\n  b <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">></span><span class=\"token operator\">=</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{</span>\n    a /<span class=\"token operator\">=</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">;</span>\n    b *<span class=\"token operator\">=</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  lf <span class=\"token operator\">=</span> stirling<span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"a: %.15f<span class=\"token entity\" title=\"\\n\">\\n</span>b: %.0f<span class=\"token entity\" title=\"\\n\">\\n</span>lf: %.15f<span class=\"token entity\" title=\"\\n\">\\n</span>\"</span>, a, b, lf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{</span>\n    start <span class=\"token operator\">+=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n    a <span class=\"token operator\">=</span> log10<span class=\"token punctuation\">(</span>start/b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">></span><span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">{</span>\n      b *<span class=\"token operator\">=</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">;</span>\n      a -<span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    i ++<span class=\"token punctuation\">;</span>\n    lf <span class=\"token operator\">+=</span> a<span class=\"token punctuation\">;</span>\n        \n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>lf <span class=\"token operator\">></span><span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span>\n        lf -<span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span>\n\n//    printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"[%.0f, %.15f]  \"</span>, start, lf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   \n    <span class=\"token keyword\">if</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span>lf <span class=\"token operator\">>=</span> low<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>lf <span class=\"token operator\">&lt;</span> hi<span class=\"token punctuation\">))</span></span>\n     <span class=\"token punctuation\">{</span>\n       <span class=\"token function\">find</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n       <span class=\"token builtin class-name\">break</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n   \n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">></span><span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n      lf <span class=\"token operator\">=</span> stirling<span class=\"token punctuation\">(</span>start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      j ++<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">></span><span class=\"token operator\">=</span> <span class=\"token number\">100000</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">{</span>\n          j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n          printf<span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>find<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{</span>\n    printf<span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token entity\" title=\"\\n\">\\n</span>当前界限下的阶乘%.0f!, 对应的对数%.15f\"</span>, start, lf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  mpfr_clear<span class=\"token punctuation\">(</span>ln10<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  mpfr_clear<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin class-name\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>于是又得出了5777940569!=314159265301xxx...xxx。  </p>\n<p>后面经过长时间挂机，<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=12711&#x26;fromuid=20\">最终无心人给出</a>了如下结果</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">d <span class=\"token operator\">=</span> <span class=\"token number\">3</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\nd <span class=\"token operator\">=</span> <span class=\"token number\">31</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">62</span>\nd <span class=\"token operator\">=</span> <span class=\"token number\">314</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">62</span>\nd <span class=\"token operator\">=</span> <span class=\"token number\">3141</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">10044</span>\nd <span class=\"token operator\">=</span><span class=\"token number\">31415</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">50583</span>\nd <span class=\"token operator\">=</span> <span class=\"token number\">314159</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">1490717</span>\nd <span class=\"token operator\">=</span> <span class=\"token number\">3141592</span>, n <span class=\"token operator\">=</span>   <span class=\"token number\">5573998</span>  开始数字是3141592381\nd <span class=\"token operator\">=</span> <span class=\"token number\">31415926</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">65630447</span> 开始数字是3141592602\nd <span class=\"token operator\">=</span> <span class=\"token number\">314159265</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">688395641</span> 开始数字3141592651957527\nd <span class=\"token operator\">=</span> <span class=\"token number\">3141592653</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">5777940569</span> 起始数字314159265301\nd <span class=\"token operator\">=</span> <span class=\"token number\">31415926535</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">77773146302</span>, 开始 数字314159265353488\nd <span class=\"token operator\">=</span> <span class=\"token number\">314159265358</span>,  n <span class=\"token operator\">=</span> <span class=\"token number\">1154318938997</span>开始数字3141592653584138\nd <span class=\"token operator\">=</span> <span class=\"token number\">3141592653589</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">1544607046599</span>开始数字31415926535899498</code></pre></div>\n<p><a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=969&#x26;pid=82215&#x26;fromuid=20\">2019年12月Ickiverar</a> 给出了更加高效的代码，\n<a name=ickiverar></a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#include&lt;mpreal.h></span>\n<span class=\"token comment\">#pragma comment(lib,\"mpfr-4.0.1.lib\")</span>\n<span class=\"token comment\">#include&lt;iostream></span>\n<span class=\"token comment\">#include&lt;intrin.h></span>\n\ntypedef mpfr::mpreal real<span class=\"token punctuation\">;</span>\n\n//10^frac<span class=\"token punctuation\">(</span>log10<span class=\"token punctuation\">(</span>factorial<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>*2^64/10\nuint64_t einit<span class=\"token punctuation\">(</span>uint64_t n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    static const real <span class=\"token assign-left variable\">log10e</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>/mpfr::log<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    static const real <span class=\"token assign-left variable\">p264</span><span class=\"token operator\">=</span>mpfr::pow<span class=\"token punctuation\">(</span><span class=\"token number\">2,64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token builtin class-name\">return</span> <span class=\"token punctuation\">(</span>uint64_t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>p264*mpfr::pow<span class=\"token punctuation\">(</span><span class=\"token number\">10</span>,mpfr::frac<span class=\"token punctuation\">(</span>mpfr::lngamma<span class=\"token punctuation\">(</span>n+1<span class=\"token punctuation\">)</span>*log10e<span class=\"token punctuation\">)</span>-1<span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n//2^64/10 ~<span class=\"token operator\">&lt;</span> e*n/10^k <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span>^64\nuint64_t emul<span class=\"token punctuation\">(</span>uint64_t e,uint64_t n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    //10^pos\n    static uint64_t pow10<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token number\">1,10</span>,100,1000,10000,\n        <span class=\"token number\">100000,1000000</span>,10000000,100000000,1000000000,\n        <span class=\"token number\">10000000000,100000000000</span>,1000000000000,10000000000000,100000000000000,\n        <span class=\"token number\">1000000000000000,10000000000000000</span>,100000000000000000,1000000000000000000,10000000000000000000\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    static int shrn<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">3,6</span>,9,13,16,19,23,26,29,33,36,39,43,46,49,53,56,59,63,66<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    //round<span class=\"token punctuation\">(</span><span class=\"token number\">2</span>^<span class=\"token punctuation\">(</span><span class=\"token number\">64</span>+shrn<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>/10^<span class=\"token punctuation\">(</span>pos+1<span class=\"token punctuation\">))</span>\n    static uint64_t inv10<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        0xcccccccccccccccd,0xa3d70a3d70a3d70a,0x83126e978d4fdf3b,0xd1b71758e219652c,\n        0xa7c5ac471b478423,0x8637bd05af6c69b5,0xd6bf94d5e57a42bc,0xabcc77118461cefd,\n        0x89705f4136b4a597,0xdbe6fecebdedd5bf,0xafebff0bcb24aaff,0x8cbccc096f5088cc,\n        0xe12e13424bb40e13,0xb424dc35095cd80f,0x901d7cf73ab0acd9,0xe69594bec44de15b,\n        0xb877aa3236a4b449,0x9392ee8e921d5d07,0xec1e4a7db69561a5,0xbce5086492111aeb\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    //res <span class=\"token operator\">=</span> e*n\n    uint64_t res<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    res<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>_umul128<span class=\"token punctuation\">(</span>e,n,res+1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    if<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>return res<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    //shrt <span class=\"token operator\">=</span> res <span class=\"token operator\">>></span> shrn<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">]</span>\n    int <span class=\"token assign-left variable\">pos</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    uint64_t shrt<span class=\"token punctuation\">;</span>\n    if<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token operator\">=</span>pow10<span class=\"token punctuation\">[</span><span class=\"token number\">19</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token assign-left variable\">pos</span><span class=\"token operator\">=</span><span class=\"token number\">19</span><span class=\"token punctuation\">;</span>\n        <span class=\"token assign-left variable\">shrt</span><span class=\"token operator\">=</span>res<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">>></span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        res<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    else<span class=\"token punctuation\">{</span>\n        while<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token operator\">=</span>pow10<span class=\"token punctuation\">[</span>pos+1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>++pos<span class=\"token punctuation\">;</span>\n        <span class=\"token assign-left variable\">shrt</span><span class=\"token operator\">=</span>res<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token number\">64</span>-shrn<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">]</span><span class=\"token operator\">|</span>res<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">>></span>shrn<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        res<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>res<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">>></span>shrn<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">]</span>?inv10<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">]</span>:0<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n   \n    _umul128<span class=\"token punctuation\">(</span>shrt,inv10<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">]</span>,res+1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token builtin class-name\">return</span> res<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>+res<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nint <span class=\"token function-name function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    mpfr::mpreal::set_default_prec<span class=\"token punctuation\">(</span><span class=\"token number\">192</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    std::cout.precision<span class=\"token punctuation\">(</span><span class=\"token number\">39</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    uint64_t <span class=\"token assign-left variable\">iinit</span><span class=\"token operator\">=</span>0xdeadbeefbadcab1e,isize<span class=\"token operator\">=</span><span class=\"token number\">1000000000</span><span class=\"token punctuation\">;</span>\n    uint64_t <span class=\"token assign-left variable\">eval</span><span class=\"token operator\">=</span>einit<span class=\"token punctuation\">(</span>iinit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    for<span class=\"token punctuation\">(</span>uint64_t <span class=\"token assign-left variable\">i</span><span class=\"token operator\">=</span>iinit+1<span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token operator\">=</span>iinit+isize<span class=\"token punctuation\">;</span>++i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token assign-left variable\">eval</span><span class=\"token operator\">=</span>emul<span class=\"token punctuation\">(</span>eval,i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    std::cout<span class=\"token operator\">&lt;&lt;</span>eval<span class=\"token operator\">&lt;&lt;</span>std::endl<span class=\"token punctuation\">;</span>\n    std::cout<span class=\"token operator\">&lt;&lt;</span>einit<span class=\"token punctuation\">(</span>iinit+isize<span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;&lt;</span>std::endl<span class=\"token punctuation\">;</span>\n    <span class=\"token builtin class-name\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>并且于2019年12月18日得出下一个数据，即  </p>\n<p><a name=result></a>\n13位小数的结果有了，119万亿左右。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">d <span class=\"token operator\">=</span>  <span class=\"token number\">0</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">9</span>\nd <span class=\"token operator\">=</span>  <span class=\"token number\">1</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">62</span>\nd <span class=\"token operator\">=</span>  <span class=\"token number\">2</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">62</span>\nd <span class=\"token operator\">=</span>  <span class=\"token number\">3</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">10044</span>\nd <span class=\"token operator\">=</span>  <span class=\"token number\">4</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">50583</span>\nd <span class=\"token operator\">=</span>  <span class=\"token number\">5</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">1490717</span>\nd <span class=\"token operator\">=</span>  <span class=\"token number\">6</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">5573998</span>\nd <span class=\"token operator\">=</span>  <span class=\"token number\">7</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">65630447</span>\nd <span class=\"token operator\">=</span>  <span class=\"token number\">8</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">688395641</span>\nd <span class=\"token operator\">=</span>  <span class=\"token number\">9</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">5777940569</span>\nd <span class=\"token operator\">=</span> <span class=\"token number\">10</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">77773146302</span>\nd <span class=\"token operator\">=</span> <span class=\"token number\">11</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">1154318938997</span>\nd <span class=\"token operator\">=</span> <span class=\"token number\">12</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">1544607046599</span>\nd <span class=\"token operator\">=</span> <span class=\"token number\">13</span>, n <span class=\"token operator\">=</span> <span class=\"token number\">119027672349942</span></code></pre></div>\n<p>随后liangbch也提供了一份<a href=\"https://www.bccn.net/paste/3202\">性能类似的C代码</a></p>","fields":{"slug":"factorial-pi"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"factorial-pi"}}}