{"componentChunkName":"component---src-templates-page-js","path":"/blog/fileapi","webpackCompilationHash":"501cab7e3cb076044a34","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Basic Understanding of File Api","date":"Thu, 25th July 2019","tags":["javascript"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAEBElEQVQ4y4WUfUxbVRTAXz8YE42JZv4huq0TSgYF2vIx2goyg8bPLcOYGQ1kyZAOY4ZkmmiiLrgsMdPBH2o2MkqhdFDHx/o1BxuFOgIE2LAFCvgFATpKyeofaBW6R+/x3st7T7qQeJKbe9695/zePeeeexiGE5FIxEilUqp7PB7xY0/JxEQHgB3dPb1HuntcxUQnazufSBQHgyt0//Fdu5iEhAQmRuLi4hjOmTGYzBJ+fXj09msGU7Ov29ULN1x9gPXpoeGRQ/z+RYNRin1EMbD4+Hg6X2lrF0DRjY1kU4uls81qA//dJewDG2T4lwLQbrUD3rPej0RSeHur3UF9d3AspsvVy4e3s9PuqG4wmdfGfVMCCAsig/+emJoGbLPeYbOfwd8PEd+ycj3Jl4jpu9VPYbNzcxqj+fKsu38AwuG/CYyNRqMEBIgTopM1shcOh6H3x35obrXMLfr9OsL49PPTEj53j+AwFubmFwgoggdiWZY6E8Ez0QXweoSYAAFHPBOTUNfQeBfrjwp5vOlyaTpsDhoiBqEHQRyMxA738Y8IjEhD82WUd/AFtuz9SgiF7mkEoPOH6zqr8xo1JDBuUAg/2E0QlTseL7xZcgztSc1Aicmp6J3j5bAcCOgE4LXrXTqrIwYIW4FEJ7K6ugpffHkO5KockCmUoNTmo30KJSp99wSsBIPaWKBzeyAJk0hPnxvyX3wFEuWpkJajgfQDOlDkatHetExUgoHB5eX/B/KwhUU/pOVqICkjC7ILnofU7DwKjQEGHwRuEzKft5+847Bnfzq8dew4NFu+hxQcMndKAbiyFYgv5dntLoXlTjg+6aM5M1uugP5kFTyToQZFjhaRgddRSZkeAoGl/y7lZo8rr+2qjZbN1mJmWfo6wItrbV+6Cj4+XQ23BgahoOhVJFdlg7KwAD2domBLyysg/NefeQKQPJ9Gc8vPvplf+MKOknBJTZJTE2BSZhYcPvo2qqs3ogMvF4G6sjCalJ8VycjNh9pvv/sN2z1MYROTPvr03G638pKxcczZdQPuhULC0+NCpjV39qvzUPnRJ+jJ9P2sXJcDR46WwoV6g2dmakpNGFetVspifv19lm8OUnOrpeqioSE0NHIb/llbo+8WXwrCN0tqbgOXDXrupdfhs+qzfwwMDZ4iPsR3ZHR0E5Ysl9O5yWSS0G6B5c7I8O56Y1MD7o2wiNuXb3omKkvLjGZqC+C9qg+h02Y3QnR9N5+ysbExCtsrk20uqNXqzVmlEn9dUxvHG9ps9sJLxqbBppZWqPjgFHxzoW5ocX7+oNAHHU7pG8XFsQ12q4jFYrIpOqHXSypOVkm5NEjaOzqLvF5PEdHJ2plz5yW1NTVivttLJEJvZv4FXjOCw/Nbtr4AAAAASUVORK5CYII=","width":150,"height":150,"src":"/static/9edd39982ea3b809c0dd94493ebf737c/4148e/bash.png","srcSet":"/static/9edd39982ea3b809c0dd94493ebf737c/4148e/bash.png 1x"}}}},"html":"<p> One of my favourite and exciting topic was how can i implement file uploading in my website. I used to watch youtube videos where they do it with <code class=\"language-text\">PHP</code>. But they all just don't workout for me. Thank god there's <code class=\"language-text\">File API</code> which  allows javascript to access information about file like <code class=\"language-text\">Name</code>, <code class=\"language-text\">Last modified</code>, <code class=\"language-text\">Type</code>, <code class=\"language-text\">Size</code>, <code class=\"language-text\">webkitRelativePath</code>. Let's dive deeper on how to use it.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!--  to get file as input --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p> Initial input value would be zero and as the user selects file it changes.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//  selecting element</span>\n<span class=\"token keyword\">const</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input[type=file]'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//  fire an event handler when the input value changes</span>\n   el<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">const</span> fileList <span class=\"token operator\">=</span> el<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">;</span> <span class=\"token comment\">/* now you can work with the file list */</span>    \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p> Each file object provides three useful information about file.</p>\n<ul>\n<li><code class=\"language-text\">Name</code> : The file's name as a read-only string. This is just the file name, and does not include any path information. </li>\n<li><code class=\"language-text\">Size</code> : The size of the file in bytes as a read-only 64-bit integer.</li>\n<li><code class=\"language-text\">Type</code> : The MIME type of the file as a read-only string or <code class=\"language-text\">&quot;&quot;</code> if the type couldn't be determined.</li>\n</ul>\n<p>Until Now we have got the filelist selected by user. let's do some operations on this.</p>\n<h3>Getting Information about selected files</h3>\n<hr>\n<p> Let's say we want an image less than 5MB. To allow multiplle files we can  add multiple attribute to input tag.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">multiple</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p> It will give us all object in filelist object.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// using foreach loop to iterate through all object</span>\n<span class=\"token comment\">// 5 Mb have 5*1024 byte</span>\nfileList<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// taking each file as file variable</span>\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token operator\">*</span><span class=\"token number\">1024</span> <span class=\"token operator\">&amp;&amp;</span> file<span class=\"token punctuation\">.</span>type <span class=\"token operator\">==</span> <span class=\"token string\">\"image/jpeg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// do something</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n   <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"File size Excedded\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Above I have used ES6 classes. If You are not comfortable with that. Don't worry. I have simplified it further.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">fileList<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// referring each file as file variable</span>\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span>size <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5</span><span class=\"token operator\">*</span><span class=\"token number\">1024</span> <span class=\"token operator\">&amp;&amp;</span> file<span class=\"token punctuation\">.</span>type<span class=\"token operator\">=</span><span class=\"token string\">\"image/jpeg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// do something</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"File size excedded.\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>","fields":{"slug":"fileapi"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"fileapi"}}}