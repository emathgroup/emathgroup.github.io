{"componentChunkName":"component---src-templates-page-js","path":"/blog/hanoi-four","webpackCompilationHash":"db7943c022b9df7daa86","result":{"data":{"markdownRemark":{"frontmatter":{"title":"四柱汉诺塔升级版","date":"Sat, 25th January 2020","tags":["汉诺塔","算法"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABYlAAAWJQFJUiTwAAACEUlEQVQ4y6WTTWsTURSGbz9CceNW/AAFXbj0A8S14FK68Qe40YK6ciEI/QNuRcGPjSAVf0DRXyCoRZCCpmmbUCfNTJKmSWcydzLJzJzHubdTqU3pxsPhnJmX895z73vPVT7sYExgL+990iZu0W7QimKXgf9PXW4qR9wC3IW78NL+Z+CgPan9oj3s/yQKxsghtAows/kznAXfFrlEHamv00v0GrE+jNwswNTm+RyET7aoTrQlzirdRK8eRRYLJnDNkudskcOgaTp3k7BCHI6R+wU5s+ASTFryOWQAZXrfqZXZCKIqw0gOknVx5sSAMo8opGRitgga7YpXY23Y/0GwNda5Dp4F7Jkv27YlE2UOAqKmOGvsJP0yQWuM7BpNjc6SfmMwTTxFXCJWxOdhxaidC7Z9hGCZ0TlbeizPlLyZlldKXk/JcyWNtySajfLRattt337ExZtcmeXSLa7OcuEGT16I3mR1OZ8wQw6L2ckvZtdVmOZDSPyFimI99wkbJ02snslGToYesZnqymGdgzSfJhafcmcmfXhqdP9E4Q9Oju4eT5c/2puICBx8D79Pt0sQ4DiEob0qD653jHQzHqU9P+ahGtzr5LtiGJOG5mH4XTodfJ9q1ayi8pn6QKLQimi/T9h4mkGHYYIeEA3N0+ixz1QEX9HvpPE+cxcOemNBmr/Z9qTh4ubjUpaVv2oZwfgP+wP0PJVnl9g+3gAAAABJRU5ErkJggg==","width":150,"height":150,"src":"/static/f2fb92ae5e967665440769dd0c451f8b/4148e/hanoi-icon.png","srcSet":"/static/f2fb92ae5e967665440769dd0c451f8b/4148e/hanoi-icon.png 1x"}}}},"html":"<h1>问题提出</h1>\n<p>KeyTo9_Fans于2008年2月在百度数学吧发布了<a href=\"http://tieba.baidu.com/f?ct=335675392&#x26;tn=baiduPostBrowser&#x26;sc=4079132505&#x26;z=318545067&#x26;pn=0&#x26;rn=50&#x26;lm=0&#x26;word=%CA%FD%D1%A7#4079132505\">四柱汉诺塔升级版问题</a>:<br>\n有四个排成一行的柱子和n个大小不同的盘子，每次可以将一个盘子移动到相邻的柱子上，但是大盘子不能放在小盘子上面。\n请用最小的步数将n个盘子从第一个柱子全部移到第4个盘子。<br>\n热衷于进口Fans优秀题材的mathe在6月将题目<a href=\"https://bbs.emath.ac.cn/thread-563-1-5.html\">进口到了数学研发论坛</a>。<br>\n并提议:<br>\n这个问题在n不大（比如不超过10）时用计算机应该不难，但是n大一些就很难了。<br>\n看谁能够计算到最大的n.<br>\n还有对于比较大的n,比如n=20和n=30,计算最优的移动方案很难，所以我们还可以比赛对于n=20和n=30，看谁可以用最小的步数完成移动过程  </p>\n<h1>初步进展</h1>\n<p>无心人<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=563&#x26;pid=6649&#x26;fromuid=20\">计算出</a><br>\nn = 3  19步<br>\nn = 4  34步<br>\n如果分别是字母A、B、C、c、b、a代表移动<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>→</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>2</mn><mo>→</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>3</mn><mo>→</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>4</mn><mo>→</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>3</mn><mo>→</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>2</mn><mo>→</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1\\to2, 2\\to 3, 3\\to 4, 4\\to 3, 3\\to 2, 2\\to1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>\n无心人给出移动的方案分别为:<br>\n3的<br>\nABACBcAbaCBcbCBCABC   19步<br>\n4的<br>\nABACBAbaBABAbcabaCBcbCBCABAbaBCABC  34步.  </p>\n<p>这个结果和KeyTo9_Fans的结果一致，他在4月就已经在数学吧给出了更多的结果:  </p>\n<table>\n<thead>\n<tr>\n<th>n</th>\n<th>f(n)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>　0</td>\n</tr>\n<tr>\n<td>1</td>\n<td>　3</td>\n</tr>\n<tr>\n<td>2</td>\n<td>　10</td>\n</tr>\n<tr>\n<td>3</td>\n<td>　19</td>\n</tr>\n<tr>\n<td>4</td>\n<td>　34</td>\n</tr>\n<tr>\n<td>5</td>\n<td>　57</td>\n</tr>\n<tr>\n<td>6</td>\n<td>　88</td>\n</tr>\n<tr>\n<td>7</td>\n<td>123</td>\n</tr>\n<tr>\n<td>8</td>\n<td>176</td>\n</tr>\n<tr>\n<td>9</td>\n<td>253</td>\n</tr>\n<tr>\n<td>10</td>\n<td>342</td>\n</tr>\n<tr>\n<td>11</td>\n<td>449</td>\n</tr>\n<tr>\n<td>12</td>\n<td>572</td>\n</tr>\n<tr>\n<td>13</td>\n<td>749</td>\n</tr>\n</tbody>\n</table>\n<p>据说mathe随后<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=563&#x26;pid=6698&#x26;fromuid=20\">写了一个C++代码</a>，检验了KeyTo9_Fans的结果已经是最优的了, 只是可惜代码已经无法下载了。\n但是mathe表示由于空间复杂度的原因，我们很难再找出n更大的最优结果了。  </p>\n<h1>Fans进入数学研发论坛</h1>\n<p>2009年11月，KeyTo9_Fans步入数学研发论坛<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=563&#x26;pid=22947&#x26;fromuid=20\">发表他的意见</a>：<br>\n做广度优先搜索时，扩展出来的新状态放在队列尾端。<br>\n而已经扩展过的状态是没有必要保留的，可以直接从队列头部清除，释放空间。<br>\n但为了防止走回头路，需要保留上一步扩展到的状态。<br>\n综上所述，扩展过程只需用三个数组：last[]，now[]，next[]。<br>\n逐一扫描now[]数组所记录的状态，把扩展出来的状态与last[]、now[]、next[]中的状态均比较一遍，如果是新的状态，则记录到next[]里。<br>\n扫描完毕后，把数组滚动一下，即 last = now，now = next，然后继续扫描now[]数组。<br>\n对n=16做这种推进式的扩展，高峰时每个数组存储的状态数为一千多万（为了方便查找重复状态，当然是以状态的哈希值作为下标），共占用200M左右的内存，还不至于动用硬盘空间。<br>\n这种推进式的扩展没有保留扩展路径，所以只能得到最佳步数，不能得到方案。<br>\n所幸的是，n&#x3C;=16的情况都通过手工操作找到了最佳步数对应的一种可行方案。<br>\nFans还提供了对应的游戏以供下载，可以也不能下载了。  </p>\n<h1>极限拓展</h1>\n<p>KeyTo9_Fans继续努力<a href=\"https://bbs.emath.ac.cn/forum.php?mod=redirect&#x26;goto=findpost&#x26;ptid=563&#x26;pid=23248&#x26;fromuid=20\">为更大的n搜索较优秀的结果</a>:<br>\n当16&#x3C;n&#x3C;29时，捆绑前(n-13)个盘子，即把最小的几个盘子作为一个整体。<br>\n这个整体直接在1柱和4柱上移动，移动1次的代价为f(k)，k为这个整体的盘子数，f是前面已经算好的数据。<br>\n例如，n=17时，捆绑1~4盘，作为一个整体，移动代价为f(4)=34。<br>\n这样就相当于只有14个盘子了，状态数为4^14，是可以全部存下来的。<br>\n由于捆绑了4个盘子，而f(5)、f(6)、……的移动无法仅用f(4)来表示，所以移动规则要相应地修改。<br>\n除了把一个盘子移到相邻的柱子之外，还要考虑1次性把多个盘子从1柱移到4柱或移回来。<br>\n即f(4)到f(16)的移动均可直接进行。<br>\n这样，问题就变成了在含有4^14个顶点、标有长度的边的无向图中找最短路径。<br>\n由于这个图的边是有规律且很稀疏的，所以即使顶点数高达4^14，找最短路径也不成问题。<br>\n如果捆绑前(n-13)个盘子不会造成结果不优，那么1盘到28盘的移动步数分别为：  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">1</span>:     <span class=\"token number\">3</span>\n<span class=\"token number\">2</span>:    <span class=\"token number\">10</span>\n<span class=\"token number\">3</span>:    <span class=\"token number\">19</span>\n<span class=\"token number\">4</span>:    <span class=\"token number\">34</span>\n<span class=\"token number\">5</span>:    <span class=\"token number\">57</span>\n<span class=\"token number\">6</span>:    <span class=\"token number\">88</span>\n<span class=\"token number\">7</span>:   <span class=\"token number\">123</span>\n<span class=\"token number\">8</span>:   <span class=\"token number\">176</span>\n<span class=\"token number\">9</span>:   <span class=\"token number\">253</span>\n<span class=\"token number\">10</span>:   <span class=\"token number\">342</span>\n<span class=\"token number\">11</span>:   <span class=\"token number\">449</span>\n<span class=\"token number\">12</span>:   <span class=\"token number\">572</span>\n<span class=\"token number\">13</span>:   <span class=\"token number\">749</span>\n<span class=\"token number\">14</span>:   <span class=\"token number\">980</span>\n<span class=\"token number\">15</span>:  <span class=\"token number\">1261</span>\n<span class=\"token number\">16</span>:  <span class=\"token number\">1560</span>\n<span class=\"token number\">17</span>:  <span class=\"token number\">1903</span> \n<span class=\"token number\">18</span>:  <span class=\"token number\">2328</span> \n<span class=\"token number\">19</span>:  <span class=\"token number\">2889</span> \n<span class=\"token number\">20</span>:  <span class=\"token number\">3562</span> \n<span class=\"token number\">21</span>:  <span class=\"token number\">4377</span> \n<span class=\"token number\">22</span>:  <span class=\"token number\">5276</span> \n<span class=\"token number\">23</span>:  <span class=\"token number\">6251</span> \n<span class=\"token number\">24</span>:  <span class=\"token number\">7392</span> \n<span class=\"token number\">25</span>:  <span class=\"token number\">8779</span> \n<span class=\"token number\">26</span>: <span class=\"token number\">10488</span> \n<span class=\"token number\">27</span>: <span class=\"token number\">12469</span> \n<span class=\"token number\">28</span>: <span class=\"token number\">14832</span></code></pre></div>\n<p>当n>28时，捆绑前(n-13)个盘子会造成结果不优，于是停止寻找最短路径，手工往下推导。<br>\n仿照前28个盘子的移动方案，以相同的方式移动29盘至32盘，结果为：  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">29</span>: <span class=\"token number\">17497</span>\n<span class=\"token number\">30</span>: <span class=\"token number\">20228</span>\n<span class=\"token number\">31</span>: <span class=\"token number\">23377</span>\n<span class=\"token number\">32</span>: <span class=\"token number\">27082</span></code></pre></div>\n<p>Fans还将移动模式制作成图片:<br>\n<img src=\"/8d0d08dd875f0aa53b1c422e5ca6a517/hanoi-4.png\" alt=\"hanoi4\"><br>\n但n=0、n=1、n=3和n=6例外，需要特殊处理。<br>\n令f(0)=0，f(1)=3，f(3)=19，f(6)=88，<br>\n然后利用f(0)到f(n)的结果，枚举a,b,c,d,e的值，就可以求得f(n+1)。<br>\n这样求f(n)的时间复杂度为O(n^6)。<br>\nf(2)到f(100)的结果如下：  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">  n      f<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>     d  e  c  a  b\n--------------------------------\n  <span class=\"token number\">2</span>:       <span class=\"token number\">10</span>     <span class=\"token number\">0</span>  <span class=\"token number\">0</span>  <span class=\"token number\">0</span>  <span class=\"token number\">0</span>  <span class=\"token number\">1</span>\n  <span class=\"token number\">3</span>:       <span class=\"token number\">19</span>     <span class=\"token number\">0</span>  <span class=\"token number\">0</span>  <span class=\"token number\">0</span>  <span class=\"token number\">0</span>  <span class=\"token number\">1</span>\n  <span class=\"token number\">4</span>:       <span class=\"token number\">34</span>     <span class=\"token number\">0</span>  <span class=\"token number\">0</span>  <span class=\"token number\">1</span>  <span class=\"token number\">1</span>  <span class=\"token number\">2</span>\n  <span class=\"token number\">5</span>:       <span class=\"token number\">57</span>     <span class=\"token number\">1</span>  <span class=\"token number\">1</span>  <span class=\"token number\">2</span>  <span class=\"token number\">2</span>  <span class=\"token number\">3</span>\n  <span class=\"token number\">6</span>:       <span class=\"token number\">88</span>     <span class=\"token number\">1</span>  <span class=\"token number\">1</span>  <span class=\"token number\">2</span>  <span class=\"token number\">2</span>  <span class=\"token number\">3</span>\n  <span class=\"token number\">7</span>:      <span class=\"token number\">123</span>     <span class=\"token number\">1</span>  <span class=\"token number\">2</span>  <span class=\"token number\">3</span>  <span class=\"token number\">3</span>  <span class=\"token number\">4</span>\n  <span class=\"token number\">8</span>:      <span class=\"token number\">176</span>     <span class=\"token number\">2</span>  <span class=\"token number\">3</span>  <span class=\"token number\">4</span>  <span class=\"token number\">4</span>  <span class=\"token number\">5</span>\n  <span class=\"token number\">9</span>:      <span class=\"token number\">253</span>     <span class=\"token number\">3</span>  <span class=\"token number\">3</span>  <span class=\"token number\">5</span>  <span class=\"token number\">5</span>  <span class=\"token number\">6</span>\n <span class=\"token number\">10</span>:      <span class=\"token number\">342</span>     <span class=\"token number\">3</span>  <span class=\"token number\">4</span>  <span class=\"token number\">5</span>  <span class=\"token number\">6</span>  <span class=\"token number\">7</span>\n <span class=\"token number\">11</span>:      <span class=\"token number\">449</span>     <span class=\"token number\">3</span>  <span class=\"token number\">4</span>  <span class=\"token number\">6</span>  <span class=\"token number\">6</span>  <span class=\"token number\">7</span>\n <span class=\"token number\">12</span>:      <span class=\"token number\">572</span>     <span class=\"token number\">4</span>  <span class=\"token number\">5</span>  <span class=\"token number\">7</span>  <span class=\"token number\">7</span>  <span class=\"token number\">8</span>\n <span class=\"token number\">13</span>:      <span class=\"token number\">749</span>     <span class=\"token number\">5</span>  <span class=\"token number\">7</span>  <span class=\"token number\">7</span>  <span class=\"token number\">8</span> <span class=\"token number\">10</span>\n <span class=\"token number\">14</span>:      <span class=\"token number\">980</span>     <span class=\"token number\">5</span>  <span class=\"token number\">7</span>  <span class=\"token number\">8</span>  <span class=\"token number\">9</span> <span class=\"token number\">11</span>\n <span class=\"token number\">15</span>:     <span class=\"token number\">1261</span>     <span class=\"token number\">6</span>  <span class=\"token number\">8</span>  <span class=\"token number\">9</span> <span class=\"token number\">10</span> <span class=\"token number\">12</span>\n <span class=\"token number\">16</span>:     <span class=\"token number\">1560</span>     <span class=\"token number\">6</span>  <span class=\"token number\">8</span>  <span class=\"token number\">9</span> <span class=\"token number\">10</span> <span class=\"token number\">12</span>\n <span class=\"token number\">17</span>:     <span class=\"token number\">1903</span>     <span class=\"token number\">7</span>  <span class=\"token number\">9</span> <span class=\"token number\">10</span> <span class=\"token number\">11</span> <span class=\"token number\">13</span>\n <span class=\"token number\">18</span>:     <span class=\"token number\">2328</span>     <span class=\"token number\">8</span> <span class=\"token number\">10</span> <span class=\"token number\">11</span> <span class=\"token number\">12</span> <span class=\"token number\">14</span>\n <span class=\"token number\">19</span>:     <span class=\"token number\">2889</span>     <span class=\"token number\">9</span> <span class=\"token number\">11</span> <span class=\"token number\">12</span> <span class=\"token number\">13</span> <span class=\"token number\">15</span>\n <span class=\"token number\">20</span>:     <span class=\"token number\">3562</span>    <span class=\"token number\">10</span> <span class=\"token number\">12</span> <span class=\"token number\">12</span> <span class=\"token number\">14</span> <span class=\"token number\">17</span>\n <span class=\"token number\">21</span>:     <span class=\"token number\">4377</span>    <span class=\"token number\">10</span> <span class=\"token number\">13</span> <span class=\"token number\">13</span> <span class=\"token number\">15</span> <span class=\"token number\">18</span>\n <span class=\"token number\">22</span>:     <span class=\"token number\">5276</span>    <span class=\"token number\">10</span> <span class=\"token number\">13</span> <span class=\"token number\">13</span> <span class=\"token number\">15</span> <span class=\"token number\">18</span>\n <span class=\"token number\">23</span>:     <span class=\"token number\">6251</span>    <span class=\"token number\">11</span> <span class=\"token number\">14</span> <span class=\"token number\">14</span> <span class=\"token number\">16</span> <span class=\"token number\">19</span>\n <span class=\"token number\">24</span>:     <span class=\"token number\">7392</span>    <span class=\"token number\">12</span> <span class=\"token number\">14</span> <span class=\"token number\">16</span> <span class=\"token number\">17</span> <span class=\"token number\">19</span>\n <span class=\"token number\">25</span>:     <span class=\"token number\">8779</span>    <span class=\"token number\">13</span> <span class=\"token number\">16</span> <span class=\"token number\">16</span> <span class=\"token number\">18</span> <span class=\"token number\">21</span>\n <span class=\"token number\">26</span>:    <span class=\"token number\">10488</span>    <span class=\"token number\">14</span> <span class=\"token number\">17</span> <span class=\"token number\">17</span> <span class=\"token number\">19</span> <span class=\"token number\">22</span>\n <span class=\"token number\">27</span>:    <span class=\"token number\">12469</span>    <span class=\"token number\">14</span> <span class=\"token number\">17</span> <span class=\"token number\">18</span> <span class=\"token number\">20</span> <span class=\"token number\">23</span>\n <span class=\"token number\">28</span>:    <span class=\"token number\">14832</span>    <span class=\"token number\">15</span> <span class=\"token number\">18</span> <span class=\"token number\">19</span> <span class=\"token number\">21</span> <span class=\"token number\">24</span>\n <span class=\"token number\">29</span>:    <span class=\"token number\">17497</span>    <span class=\"token number\">15</span> <span class=\"token number\">18</span> <span class=\"token number\">19</span> <span class=\"token number\">21</span> <span class=\"token number\">24</span>\n <span class=\"token number\">30</span>:    <span class=\"token number\">20228</span>    <span class=\"token number\">16</span> <span class=\"token number\">19</span> <span class=\"token number\">20</span> <span class=\"token number\">22</span> <span class=\"token number\">25</span>\n <span class=\"token number\">31</span>:    <span class=\"token number\">23377</span>    <span class=\"token number\">17</span> <span class=\"token number\">20</span> <span class=\"token number\">21</span> <span class=\"token number\">23</span> <span class=\"token number\">26</span>\n <span class=\"token number\">32</span>:    <span class=\"token number\">27082</span>    <span class=\"token number\">18</span> <span class=\"token number\">21</span> <span class=\"token number\">22</span> <span class=\"token number\">24</span> <span class=\"token number\">27</span>\n <span class=\"token number\">33</span>:    <span class=\"token number\">31465</span>    <span class=\"token number\">19</span> <span class=\"token number\">22</span> <span class=\"token number\">23</span> <span class=\"token number\">25</span> <span class=\"token number\">28</span>\n <span class=\"token number\">34</span>:    <span class=\"token number\">36636</span>    <span class=\"token number\">20</span> <span class=\"token number\">23</span> <span class=\"token number\">24</span> <span class=\"token number\">26</span> <span class=\"token number\">29</span>\n <span class=\"token number\">35</span>:    <span class=\"token number\">42581</span>    <span class=\"token number\">20</span> <span class=\"token number\">24</span> <span class=\"token number\">24</span> <span class=\"token number\">27</span> <span class=\"token number\">31</span>\n <span class=\"token number\">36</span>:    <span class=\"token number\">49348</span>    <span class=\"token number\">21</span> <span class=\"token number\">25</span> <span class=\"token number\">25</span> <span class=\"token number\">28</span> <span class=\"token number\">32</span>\n <span class=\"token number\">37</span>:    <span class=\"token number\">57157</span>    <span class=\"token number\">22</span> <span class=\"token number\">25</span> <span class=\"token number\">26</span> <span class=\"token number\">28</span> <span class=\"token number\">32</span>\n <span class=\"token number\">38</span>:    <span class=\"token number\">65222</span>    <span class=\"token number\">22</span> <span class=\"token number\">26</span> <span class=\"token number\">26</span> <span class=\"token number\">29</span> <span class=\"token number\">33</span>\n <span class=\"token number\">39</span>:    <span class=\"token number\">73865</span>    <span class=\"token number\">23</span> <span class=\"token number\">27</span> <span class=\"token number\">27</span> <span class=\"token number\">30</span> <span class=\"token number\">34</span>\n <span class=\"token number\">40</span>:    <span class=\"token number\">84022</span>    <span class=\"token number\">24</span> <span class=\"token number\">28</span> <span class=\"token number\">28</span> <span class=\"token number\">31</span> <span class=\"token number\">35</span>\n <span class=\"token number\">41</span>:    <span class=\"token number\">95757</span>    <span class=\"token number\">25</span> <span class=\"token number\">28</span> <span class=\"token number\">30</span> <span class=\"token number\">32</span> <span class=\"token number\">35</span>\n <span class=\"token number\">42</span>:   <span class=\"token number\">109094</span>    <span class=\"token number\">26</span> <span class=\"token number\">30</span> <span class=\"token number\">30</span> <span class=\"token number\">33</span> <span class=\"token number\">37</span>\n <span class=\"token number\">43</span>:   <span class=\"token number\">124525</span>    <span class=\"token number\">27</span> <span class=\"token number\">31</span> <span class=\"token number\">31</span> <span class=\"token number\">34</span> <span class=\"token number\">38</span>\n <span class=\"token number\">44</span>:   <span class=\"token number\">142220</span>    <span class=\"token number\">27</span> <span class=\"token number\">31</span> <span class=\"token number\">32</span> <span class=\"token number\">35</span> <span class=\"token number\">39</span>\n <span class=\"token number\">45</span>:   <span class=\"token number\">161801</span>    <span class=\"token number\">28</span> <span class=\"token number\">32</span> <span class=\"token number\">33</span> <span class=\"token number\">36</span> <span class=\"token number\">40</span>\n <span class=\"token number\">46</span>:   <span class=\"token number\">184494</span>    <span class=\"token number\">29</span> <span class=\"token number\">33</span> <span class=\"token number\">34</span> <span class=\"token number\">37</span> <span class=\"token number\">41</span>\n <span class=\"token number\">47</span>:   <span class=\"token number\">208359</span>    <span class=\"token number\">30</span> <span class=\"token number\">34</span> <span class=\"token number\">34</span> <span class=\"token number\">37</span> <span class=\"token number\">42</span>\n <span class=\"token number\">48</span>:   <span class=\"token number\">233220</span>    <span class=\"token number\">30</span> <span class=\"token number\">34</span> <span class=\"token number\">35</span> <span class=\"token number\">38</span> <span class=\"token number\">42</span>\n <span class=\"token number\">49</span>:   <span class=\"token number\">260873</span>    <span class=\"token number\">31</span> <span class=\"token number\">35</span> <span class=\"token number\">36</span> <span class=\"token number\">39</span> <span class=\"token number\">43</span>\n <span class=\"token number\">50</span>:   <span class=\"token number\">293016</span>    <span class=\"token number\">32</span> <span class=\"token number\">36</span> <span class=\"token number\">37</span> <span class=\"token number\">40</span> <span class=\"token number\">44</span>\n <span class=\"token number\">51</span>:   <span class=\"token number\">329391</span>    <span class=\"token number\">33</span> <span class=\"token number\">37</span> <span class=\"token number\">38</span> <span class=\"token number\">41</span> <span class=\"token number\">45</span>\n <span class=\"token number\">52</span>:   <span class=\"token number\">369778</span>    <span class=\"token number\">34</span> <span class=\"token number\">38</span> <span class=\"token number\">39</span> <span class=\"token number\">42</span> <span class=\"token number\">46</span>\n <span class=\"token number\">53</span>:   <span class=\"token number\">415899</span>    <span class=\"token number\">35</span> <span class=\"token number\">39</span> <span class=\"token number\">40</span> <span class=\"token number\">43</span> <span class=\"token number\">47</span>\n <span class=\"token number\">54</span>:   <span class=\"token number\">468000</span>    <span class=\"token number\">35</span> <span class=\"token number\">40</span> <span class=\"token number\">40</span> <span class=\"token number\">44</span> <span class=\"token number\">49</span>\n <span class=\"token number\">55</span>:   <span class=\"token number\">524585</span>    <span class=\"token number\">36</span> <span class=\"token number\">41</span> <span class=\"token number\">41</span> <span class=\"token number\">45</span> <span class=\"token number\">50</span>\n <span class=\"token number\">56</span>:   <span class=\"token number\">589570</span>    <span class=\"token number\">37</span> <span class=\"token number\">42</span> <span class=\"token number\">42</span> <span class=\"token number\">46</span> <span class=\"token number\">51</span>\n <span class=\"token number\">57</span>:   <span class=\"token number\">660389</span>    <span class=\"token number\">38</span> <span class=\"token number\">42</span> <span class=\"token number\">43</span> <span class=\"token number\">46</span> <span class=\"token number\">51</span>\n <span class=\"token number\">58</span>:   <span class=\"token number\">732678</span>    <span class=\"token number\">38</span> <span class=\"token number\">43</span> <span class=\"token number\">43</span> <span class=\"token number\">47</span> <span class=\"token number\">52</span>\n <span class=\"token number\">59</span>:   <span class=\"token number\">810215</span>    <span class=\"token number\">39</span> <span class=\"token number\">44</span> <span class=\"token number\">44</span> <span class=\"token number\">48</span> <span class=\"token number\">53</span>\n <span class=\"token number\">60</span>:   <span class=\"token number\">897344</span>    <span class=\"token number\">40</span> <span class=\"token number\">45</span> <span class=\"token number\">45</span> <span class=\"token number\">49</span> <span class=\"token number\">54</span>\n <span class=\"token number\">61</span>:   <span class=\"token number\">998343</span>    <span class=\"token number\">41</span> <span class=\"token number\">46</span> <span class=\"token number\">46</span> <span class=\"token number\">50</span> <span class=\"token number\">55</span>\n <span class=\"token number\">62</span>:  <span class=\"token number\">1109122</span>    <span class=\"token number\">42</span> <span class=\"token number\">47</span> <span class=\"token number\">47</span> <span class=\"token number\">51</span> <span class=\"token number\">56</span>\n <span class=\"token number\">63</span>:  <span class=\"token number\">1230093</span>    <span class=\"token number\">43</span> <span class=\"token number\">48</span> <span class=\"token number\">48</span> <span class=\"token number\">52</span> <span class=\"token number\">57</span>\n <span class=\"token number\">64</span>:  <span class=\"token number\">1366910</span>    <span class=\"token number\">44</span> <span class=\"token number\">49</span> <span class=\"token number\">49</span> <span class=\"token number\">53</span> <span class=\"token number\">58</span>\n <span class=\"token number\">65</span>:  <span class=\"token number\">1522459</span>    <span class=\"token number\">45</span> <span class=\"token number\">50</span> <span class=\"token number\">50</span> <span class=\"token number\">54</span> <span class=\"token number\">59</span>\n <span class=\"token number\">66</span>:  <span class=\"token number\">1687510</span>    <span class=\"token number\">45</span> <span class=\"token number\">50</span> <span class=\"token number\">51</span> <span class=\"token number\">55</span> <span class=\"token number\">60</span>\n <span class=\"token number\">67</span>:  <span class=\"token number\">1874643</span>    <span class=\"token number\">46</span> <span class=\"token number\">51</span> <span class=\"token number\">52</span> <span class=\"token number\">56</span> <span class=\"token number\">61</span>\n <span class=\"token number\">68</span>:  <span class=\"token number\">2079700</span>    <span class=\"token number\">47</span> <span class=\"token number\">52</span> <span class=\"token number\">53</span> <span class=\"token number\">57</span> <span class=\"token number\">62</span>\n <span class=\"token number\">69</span>:  <span class=\"token number\">2294287</span>    <span class=\"token number\">48</span> <span class=\"token number\">53</span> <span class=\"token number\">53</span> <span class=\"token number\">57</span> <span class=\"token number\">63</span>\n <span class=\"token number\">70</span>:  <span class=\"token number\">2516366</span>    <span class=\"token number\">48</span> <span class=\"token number\">53</span> <span class=\"token number\">54</span> <span class=\"token number\">58</span> <span class=\"token number\">63</span>\n <span class=\"token number\">71</span>:  <span class=\"token number\">2757895</span>    <span class=\"token number\">49</span> <span class=\"token number\">54</span> <span class=\"token number\">55</span> <span class=\"token number\">59</span> <span class=\"token number\">64</span>\n <span class=\"token number\">72</span>:  <span class=\"token number\">3030880</span>    <span class=\"token number\">50</span> <span class=\"token number\">55</span> <span class=\"token number\">56</span> <span class=\"token number\">60</span> <span class=\"token number\">65</span>\n <span class=\"token number\">73</span>:  <span class=\"token number\">3340433</span>    <span class=\"token number\">51</span> <span class=\"token number\">56</span> <span class=\"token number\">57</span> <span class=\"token number\">61</span> <span class=\"token number\">66</span>\n <span class=\"token number\">74</span>:  <span class=\"token number\">3675094</span>    <span class=\"token number\">52</span> <span class=\"token number\">57</span> <span class=\"token number\">58</span> <span class=\"token number\">62</span> <span class=\"token number\">67</span>\n <span class=\"token number\">75</span>:  <span class=\"token number\">4038133</span>    <span class=\"token number\">53</span> <span class=\"token number\">58</span> <span class=\"token number\">59</span> <span class=\"token number\">63</span> <span class=\"token number\">68</span>\n <span class=\"token number\">76</span>:  <span class=\"token number\">4443818</span>    <span class=\"token number\">54</span> <span class=\"token number\">59</span> <span class=\"token number\">60</span> <span class=\"token number\">64</span> <span class=\"token number\">69</span>\n <span class=\"token number\">77</span>:  <span class=\"token number\">4898969</span>    <span class=\"token number\">55</span> <span class=\"token number\">60</span> <span class=\"token number\">60</span> <span class=\"token number\">65</span> <span class=\"token number\">71</span>\n <span class=\"token number\">78</span>:  <span class=\"token number\">5384602</span>    <span class=\"token number\">55</span> <span class=\"token number\">61</span> <span class=\"token number\">61</span> <span class=\"token number\">66</span> <span class=\"token number\">72</span>\n <span class=\"token number\">79</span>:  <span class=\"token number\">5923263</span>    <span class=\"token number\">56</span> <span class=\"token number\">62</span> <span class=\"token number\">62</span> <span class=\"token number\">67</span> <span class=\"token number\">73</span>\n <span class=\"token number\">80</span>:  <span class=\"token number\">6511900</span>    <span class=\"token number\">57</span> <span class=\"token number\">63</span> <span class=\"token number\">63</span> <span class=\"token number\">68</span> <span class=\"token number\">74</span>\n <span class=\"token number\">81</span>:  <span class=\"token number\">7144699</span>    <span class=\"token number\">58</span> <span class=\"token number\">64</span> <span class=\"token number\">64</span> <span class=\"token number\">69</span> <span class=\"token number\">75</span>\n <span class=\"token number\">82</span>:  <span class=\"token number\">7793996</span>    <span class=\"token number\">58</span> <span class=\"token number\">64</span> <span class=\"token number\">64</span> <span class=\"token number\">69</span> <span class=\"token number\">75</span>\n <span class=\"token number\">83</span>:  <span class=\"token number\">8482247</span>    <span class=\"token number\">59</span> <span class=\"token number\">65</span> <span class=\"token number\">65</span> <span class=\"token number\">70</span> <span class=\"token number\">76</span>\n <span class=\"token number\">84</span>:  <span class=\"token number\">9228136</span>    <span class=\"token number\">60</span> <span class=\"token number\">66</span> <span class=\"token number\">66</span> <span class=\"token number\">71</span> <span class=\"token number\">77</span>\n <span class=\"token number\">85</span>: <span class=\"token number\">10077385</span>    <span class=\"token number\">61</span> <span class=\"token number\">67</span> <span class=\"token number\">67</span> <span class=\"token number\">72</span> <span class=\"token number\">78</span>\n <span class=\"token number\">86</span>: <span class=\"token number\">11018610</span>    <span class=\"token number\">62</span> <span class=\"token number\">68</span> <span class=\"token number\">68</span> <span class=\"token number\">73</span> <span class=\"token number\">79</span>\n <span class=\"token number\">87</span>: <span class=\"token number\">12024387</span>    <span class=\"token number\">63</span> <span class=\"token number\">69</span> <span class=\"token number\">69</span> <span class=\"token number\">74</span> <span class=\"token number\">80</span>\n <span class=\"token number\">88</span>: <span class=\"token number\">13105218</span>    <span class=\"token number\">64</span> <span class=\"token number\">70</span> <span class=\"token number\">70</span> <span class=\"token number\">75</span> <span class=\"token number\">81</span>\n <span class=\"token number\">89</span>: <span class=\"token number\">14305059</span>    <span class=\"token number\">65</span> <span class=\"token number\">71</span> <span class=\"token number\">71</span> <span class=\"token number\">76</span> <span class=\"token number\">82</span>\n <span class=\"token number\">90</span>: <span class=\"token number\">15636282</span>    <span class=\"token number\">66</span> <span class=\"token number\">72</span> <span class=\"token number\">72</span> <span class=\"token number\">77</span> <span class=\"token number\">83</span>\n <span class=\"token number\">91</span>: <span class=\"token number\">17081249</span>    <span class=\"token number\">66</span> <span class=\"token number\">72</span> <span class=\"token number\">73</span> <span class=\"token number\">78</span> <span class=\"token number\">84</span>\n <span class=\"token number\">92</span>: <span class=\"token number\">18638390</span>    <span class=\"token number\">67</span> <span class=\"token number\">73</span> <span class=\"token number\">74</span> <span class=\"token number\">79</span> <span class=\"token number\">85</span>\n <span class=\"token number\">93</span>: <span class=\"token number\">20334841</span>    <span class=\"token number\">68</span> <span class=\"token number\">74</span> <span class=\"token number\">75</span> <span class=\"token number\">80</span> <span class=\"token number\">86</span>\n <span class=\"token number\">94</span>: <span class=\"token number\">22165538</span>    <span class=\"token number\">69</span> <span class=\"token number\">75</span> <span class=\"token number\">76</span> <span class=\"token number\">81</span> <span class=\"token number\">87</span>\n <span class=\"token number\">95</span>: <span class=\"token number\">24079237</span>    <span class=\"token number\">70</span> <span class=\"token number\">76</span> <span class=\"token number\">76</span> <span class=\"token number\">81</span> <span class=\"token number\">88</span>\n <span class=\"token number\">96</span>: <span class=\"token number\">26068688</span>    <span class=\"token number\">70</span> <span class=\"token number\">76</span> <span class=\"token number\">77</span> <span class=\"token number\">82</span> <span class=\"token number\">88</span>\n <span class=\"token number\">97</span>: <span class=\"token number\">28180781</span>    <span class=\"token number\">71</span> <span class=\"token number\">77</span> <span class=\"token number\">78</span> <span class=\"token number\">83</span> <span class=\"token number\">89</span>\n <span class=\"token number\">98</span>: <span class=\"token number\">30496934</span>    <span class=\"token number\">72</span> <span class=\"token number\">78</span> <span class=\"token number\">79</span> <span class=\"token number\">84</span> <span class=\"token number\">90</span>\n <span class=\"token number\">99</span>: <span class=\"token number\">33092587</span>    <span class=\"token number\">73</span> <span class=\"token number\">79</span> <span class=\"token number\">80</span> <span class=\"token number\">85</span> <span class=\"token number\">91</span>\n<span class=\"token number\">100</span>: <span class=\"token number\">35924570</span>    <span class=\"token number\">74</span> <span class=\"token number\">80</span> <span class=\"token number\">81</span> <span class=\"token number\">86</span> <span class=\"token number\">92</span></code></pre></div>\n<p>其中，n≤32的结果与之前做出来的结果完全吻合。<br>\n从表中可以看出五个参数均有良好的单调性和平滑性。<br>\n利用a,b,c,d,e的单调性和平滑性，可将时间复杂度优化为O(n)。<br>\n优化后可以计算很大的n，用来观察数据的增长趋势。<br>\n计算到n=100000，结果如下：  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">     n   log<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">))</span>      d     e     c     a     b\n--------------------------------------------------\n    <span class=\"token number\">10</span>:   <span class=\"token number\">2.534026</span>      <span class=\"token number\">3</span>     <span class=\"token number\">4</span>     <span class=\"token number\">5</span>     <span class=\"token number\">6</span>     <span class=\"token number\">7</span>\n   <span class=\"token number\">100</span>:   <span class=\"token number\">7.555392</span>     <span class=\"token number\">74</span>    <span class=\"token number\">80</span>    <span class=\"token number\">81</span>    <span class=\"token number\">86</span>    <span class=\"token number\">92</span>\n  <span class=\"token number\">1000</span>:  <span class=\"token number\">22.358183</span>    <span class=\"token number\">914</span>   <span class=\"token number\">935</span>   <span class=\"token number\">936</span>   <span class=\"token number\">956</span>   <span class=\"token number\">977</span>\n <span class=\"token number\">10000</span>:  <span class=\"token number\">68.093119</span>   <span class=\"token number\">9724</span>  <span class=\"token number\">9793</span>  <span class=\"token number\">9793</span>  <span class=\"token number\">9861</span>  <span class=\"token number\">9930</span>\n<span class=\"token number\">100000</span>: <span class=\"token number\">211.641457</span>  <span class=\"token number\">99125</span> <span class=\"token number\">99344</span> <span class=\"token number\">99344</span> <span class=\"token number\">99562</span> <span class=\"token number\">99781</span></code></pre></div>\n<p>上述结果很可能不是最终结果，但可以作为最终结果的一个很好的上界。<br>\n因为当n>32时，很可能会有新的移动模式出现。<br>\n而当前的移动模式仅仅只是新的移动模式的一个特例。<br>\n新的移动模式会在当前的基础上新增若干个参数，把当前的移动模式更为一般化。<br>\n所以接下来的工作是尝试寻找新的移动模式，看看上述结果能不能继续优化。<br>\n如果找不到新的移动模式，则说明上述结果就是最终结果，对其加以证明就完美解决问题了。  </p>\n<p>最终他把结果提交到OEIS形成了<a href=\"http://oeis.org/A160002\">A160002</a>.</p>","fields":{"slug":"hanoi-four"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"hanoi-four"}}}